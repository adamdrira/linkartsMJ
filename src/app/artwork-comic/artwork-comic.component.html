<div class="artwork white-background" *ngIf="page_not_found">
    <app-page-not-found></app-page-not-found>
</div>

<div class="artwork" *ngIf="!page_not_found">

    <!--!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!-->
    <!--!!!!!!!!!!! ARTWORK CONTAINER !!!!!!!!!!!!!!!!-->
    <!--!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!-->
    <div #leftContainer class="artwork-container"  >

        <ng-container *ngIf="!item_retrieved || !mode_visiteur_added">
            <div class="top-container">

                <div class="dark-shiny loading10 ">
    
                </div>
    
            </div>
    
            <div class="content-container">
                <div class="loading-pic2 dark-shiny">
    
                </div>
            </div>
        </ng-container>
        

        <div class="top-container" [ngClass]="{'really-invisible': !item_retrieved || !mode_visiteur_added}">
        
            <div class="buttons-container">

                <div class="left-options" [ngClass]="{'closed': optionOpened!=0}" (click)="openOption(0);">

                    <mat-icon [ngClass]="{'invisible': !show_icon }" class="smallScreen" *ngIf="optionOpened!=0">
                        video_settings
                    </mat-icon>

                    <div class="button" (click)="click_thumbnails();"
                    matTooltip="Vignettes"
                    matTooltipClass='linkarts-tooltip'
                    [matTooltipPosition]="'below'"
                    [matTooltipShowDelay]="200">
                        <mat-icon [ngClass]="{'invisible': !show_icon }">apps</mat-icon>
                    </div>
                    <div class="button" *ngIf="!fullscreen_mode" [@enterAnimation] (click)="fullscreen_button();"
                    matTooltip="Mode plein écran"
                    matTooltipClass='linkarts-tooltip'
                    [matTooltipPosition]="'below'"
                    [matTooltipShowDelay]="200">
                        <mat-icon [ngClass]="{'invisible': !show_icon }">fullscreen</mat-icon>
                    </div>
                    <div class="button" *ngIf="fullscreen_mode" [@enterAnimation] (click)="fullscreen_button();"
                    matTooltip="Quitter le mode plein écran"
                    matTooltipClass='linkarts-tooltip'
                    [matTooltipPosition]="'below'"
                    [matTooltipShowDelay]="200">
                        <mat-icon [ngClass]="{'invisible': !show_icon }">fullscreen_exit</mat-icon>
                    </div>
                    <div class="button" *ngIf="zoom_mode" [@enterAnimation] (click)="zoom_button();">
                        <mat-icon [ngClass]="{'invisible': !show_icon }">zoom_out</mat-icon>
                    </div>
                    <div class="button" *ngIf="!zoom_mode" [@enterAnimation] (click)="zoom_button();">
                        <mat-icon [ngClass]="{'invisible': !show_icon }">zoom_in</mat-icon>
                    </div>
    
                    <div class="pages-controller-container" [ngClass]="{'invisible': !display_pages}">
                        <span>Page :</span>
                        <input type="text" aria-label="" role="navigation" size="5">
                        <div class="total-pages" *ngIf="swiper && swiper.slides">
                            <span>/ {{swiper.slides.length}}</span>
                        </div>
                    </div>
                    
                    <div class="button close rotate" *ngIf="optionOpened==0" (click)="openOption(-1);stop($event);">
                        <mat-icon [ngClass]="{'invisible': !show_icon }">double_arrow</mat-icon>
                    </div>
                </div>

                <div *ngIf="type=='serie'" class="serie-container" [ngClass]="{'closed': optionOpened!=1}" (click)="openOption(1);">
                    
                    <mat-icon [ngClass]="{'invisible': !show_icon }" class="smallScreen" *ngIf="optionOpened!=1">
                        menu_book
                    </mat-icon>

                    <div class="button" *ngIf="chapterList.length>1" (click)="change_chapter_filter_bottom_to_top('down')"
                        matTooltip="Premier chapitre"
                        matTooltipClass='linkarts-tooltip'
                        [matTooltipPosition]="'below'"
                        [matTooltipShowDelay]="200">
                        <mat-icon [ngClass]="{'invisible': !show_icon }">skip_previous</mat-icon>
                    </div>
                    <div class="button" *ngIf="chapterList.length>1" (click)="change_chapter('before')"
                        matTooltip="Chapitre précédent"
                        matTooltipClass='linkarts-tooltip'
                        [matTooltipPosition]="'below'"
                        [matTooltipShowDelay]="200">
                        <mat-icon [ngClass]="{'invisible': !show_icon }">navigate_before</mat-icon>
                    </div>
                    <div class="chapter-container" [formGroup]="chapter_name_group">
                        <select formControlName="chapter_name_control" class="chapterSelector"
                            [ngClass]="{'invisible':!sumo_ready}">
                            <option value="{{current_chapter}}" selected disabled>{{chapter_name_to_show}}
                            </option>
                            <ng-container *ngIf="chapter_filter_bottom_to_top">
                                <option *ngFor="let item of chapterList; let i = index " value="{{i}}">
                                    Chapitre {{item.chapter_number}} : {{item.title}}</option>
                            </ng-container>
                            <ng-container *ngIf="!chapter_filter_bottom_to_top">
                                <option *ngFor="let item of chapterList; let i = index "
                                    value="{{chapterList.length-i-1}}">Chapitre {{chapterList[chapterList.length-i-1].chapter_number}} : {{chapterList[chapterList.length-i-1].title}}</option>
                            </ng-container>
                        </select>
                    </div>
                    <div class="button" *ngIf="chapterList.length>1" (click)="change_chapter('next')"
                        matTooltip="Chapitre suivant"
                        matTooltipClass='linkarts-tooltip'
                        [matTooltipPosition]="'below'"
                        [matTooltipShowDelay]="200">
                        <mat-icon [ngClass]="{'invisible': !show_icon }">navigate_next</mat-icon>
                    </div>
                    <div class="button" *ngIf="chapterList.length>1" (click)="change_chapter_filter_bottom_to_top('up')"
                        matTooltip="Dernier chapitre"
                        matTooltipClass='linkarts-tooltip'
                        [matTooltipPosition]="'below'"
                        [matTooltipShowDelay]="200">
                        <mat-icon [ngClass]="{'invisible': !show_icon }">skip_next</mat-icon>
                    </div>
                    
                    <div class="button close rotate" *ngIf="optionOpened==1" (click)="openOption(-1);stop($event);">
                        <mat-icon [ngClass]="{'invisible': !show_icon }">double_arrow</mat-icon>
                    </div>

                </div>

            </div>
        </div>

        <div class="content-container" [ngClass]="{'really-invisible': !item_retrieved || !mode_visiteur_added}">
            <div class="thumbnails-container" *ngIf="thumbnails==true" [@enterFromLeft]>
                <div class="thumbnails-name">
                    <mat-icon [ngClass]="{'invisible': !show_icon }" class="thumbnails-icon">apps</mat-icon>
                    <span>Vignettes</span>
                    <mat-icon [ngClass]="{'invisible': !show_icon }" class="close-icon" (click)="click_thumbnails();">close</mat-icon>
                </div>
                
                <div class="thumbnails-contents" *ngIf="swiper && style!='Manga'">
                    <ng-container *ngFor="let element of thumbnails_links; let i = index">
                        <div #thumbnail class="thumbnail-container" (click)="setSlide(i+1);"
                            [ngClass]="{'opened': i==swiper.activeIndex}">
                            <img [src]=element>
                        </div>
                        <span>Page {{i+1}}</span>
                    </ng-container>
                </div>

                <div class="thumbnails-contents" *ngIf="swiper && style=='Manga'">
                    <ng-container *ngFor="let element of thumbnails_links.slice().reverse(); let i = index">
                        <div #thumbnail class="thumbnail-container" (click)="setSlide(i+1);"
                            [ngClass]="{'opened': (thumbnails_links.length-i-1)==swiper.activeIndex}">
                            <img [src]=element>
                        </div>
                        <span>Page {{i+1}}</span>
                    </ng-container>
                </div>

            </div>
            <div #swiperContainer class="swiper-container swiper-artwork-comic">
                <div #swiperWrapper class="swiper-wrapper">
                    <ng-container *ngIf="type=='one-shot'">
                        <div #swiperSlide *ngFor="let item of list_bd_pages; let i = index" class="swiper-slide">
                            <div class="slide-container" [ngClass]="{'slide-container-ZM': zoom_mode}">
                                <div class="loading-page">
                                    <mat-spinner diameter="50" *ngIf="!display_comics_pages[i]"></mat-spinner>
                                </div>
                                <img (load)="a_drawing_is_loaded(i)" class="slide-container-img" [src]="item" (contextmenu)="onRightClick()"
                                    [ngClass]="{'slide-container-img-ZM': zoom_mode,'invisible':!display_comics_pages[i]}">
                            </div>
                        </div>
                    </ng-container>
                    <ng-container *ngIf="type=='serie'">
                        <ng-container *ngIf="show_pages[current_chapter]">
                            <div #swiperSlide
                                *ngFor="let item of list_of_pages_by_chapter[current_chapter]; let i = index"
                                class="swiper-slide">

                                <div class="slide-container" [ngClass]="{'slide-container-ZM': zoom_mode}">
                                    <div class="loading-page">
                                        <mat-spinner diameter="50" *ngIf="!display_comics_pages[i]">
                                        </mat-spinner>
                                    </div>
                                    <img (load)="a_drawing_is_loaded(i)" class="slide-container-img" [src]="item" (contextmenu)="onRightClick()"
                                        [ngClass]="{'slide-container-img-ZM': zoom_mode,'invisible':!display_comics_pages[i]}">
                                </div>

                            </div>
                        </ng-container>

                    </ng-container>
                </div>
                <!-- Add Scrollbar -->
                <div class="swiper-scrollbar"></div>
                <!-- Add Arrows -->
                <div [ngClass]="{'invisible': !swiper || 1>=swiper.slides.length}" class="swiper-button-prev"></div>
                <div [ngClass]="{'invisible': !swiper || 1>=swiper.slides.length}" class="swiper-button-next"></div>
            </div>
        </div>

       
            

        <!--!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!-->
        <!--!!!!!!!! RECOMMENDATIONS CONTAINER !!!!!!!!!!!-->
        <!--!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!-->
        <div class="recommendations-container" *ngIf="(!list_of_author_recommendations_retrieved || !list_of_recommendations_by_tag_retrieved) ">
            <div class="categories">
                <button [ngClass]="{'opened': left_container_category_index==0 }"
                    >
                    <mat-icon [ngClass]="{'invisible': !show_icon }">account_circle</mat-icon>
                    <span>Du même auteur</span>
                </button>
                <button [ngClass]="{'opened': left_container_category_index==1 }"
                  >
                    <mat-icon [ngClass]="{'invisible': !show_icon }">burst_mode</mat-icon>
                    <span>Similaires</span>
                </button>
            </div>
            <div class="recommendation-group" >
                <div class="no-recommendation">
                    <mat-spinner diameter="25"  style="margin:auto;"></mat-spinner>
                </div>
            </div>
            
        </div>

        <ng-container *ngIf="list_of_author_recommendations_retrieved && list_of_recommendations_by_tag_retrieved">
            <div class="recommendations-container">
            
                <div class="categories">
                    <button [ngClass]="{'opened': left_container_category_index==0 }"
                        (click)="open_left_container_category(0);">
                        <mat-icon [ngClass]="{'invisible': !show_icon }">account_circle</mat-icon>
                        <span>Du même auteur</span>
                    </button>
                    <button [ngClass]="{'opened': left_container_category_index==1 }"
                        (click)="open_left_container_category(1);">
                        <mat-icon [ngClass]="{'invisible': !show_icon }">burst_mode</mat-icon>
                        <span>Similaires</span>
                    </button>
                </div>
    
                <!--********************-->
                <!--********************-->
                <!--SAME AUTHOR ARTWORKS-->
                <!--********************-->
                <!--********************-->
                <ng-container *ngIf="left_container_category_index==0">
    
                    <div class="recommendation-group" *ngIf="list_of_author_recommendations_comics.length>0 && list_of_author_recommendations_comics_retrieved">
                        <div class="title">Bandes dessinées</div>
                        <div class="thumbnail-container" *ngFor="let item of list_of_author_recommendations_comics; let i=index">
    
                            <app-thumbnail-artwork *ngIf="item[0].chaptersnumber >=0"    [item]=item[0] page='subscribings'
                                now_in_seconds={{now_in_seconds}} subscribing_category='comic' subscribing_format='serie'>
                            </app-thumbnail-artwork>
                            <app-thumbnail-artwork *ngIf="item[0].chaptersnumber == null"    [item]=item[0] page='subscribings'
                                now_in_seconds={{now_in_seconds}} subscribing_category='comic' subscribing_format='one-shot'>
                            </app-thumbnail-artwork>
                        </div>
                    </div>
    
                    <!--<div class="recommendation-group" *ngIf="list_of_author_recommendations_drawings.length>0 && list_of_author_recommendations_drawings_retrieved">
                        <div class="title">Dessins</div>
                        <div class="thumbnail-container" *ngFor="let item of list_of_author_recommendations_drawings; let i=index">
    
                            <app-thumbnail-artwork *ngIf="item[0].pagesnumber >=0"    [item]=item[0] page='subscribings'
                                now_in_seconds={{now_in_seconds}} subscribing_category='drawing' subscribing_format="artbook">
                            </app-thumbnail-artwork>
    
                            <app-thumbnail-artwork *ngIf="item[0].pagesnumber == null"    [item]=item[0] page='subscribings'
                                now_in_seconds={{now_in_seconds}} subscribing_category='drawing' subscribing_format="one-shot">
                            </app-thumbnail-artwork>
                        </div>
                    </div>
    
                    <div class="recommendation-group" *ngIf="list_of_author_recommendations_writings.length>0 && list_of_author_recommendations_writings_retrieved">
                        <div class="title">Écrits</div>
                        <div class="thumbnail-container" *ngFor="let item of list_of_author_recommendations_writings; let i=index">
                            <app-thumbnail-artwork [item]=item[0]    page='subscribings' now_in_seconds={{now_in_seconds}}
                                subscribing_category='writing'></app-thumbnail-artwork>
                        </div>
                    </div>-->
                    
                    <div class="recommendation-group" *ngIf="!list_of_author_recommendations_comics.length && !list_of_author_recommendations_drawings.length && !list_of_author_recommendations_writings.length">
                        <div class="no-recommendation">
                            <mat-icon [ngClass]="{'invisible': !show_icon }">info_outline</mat-icon>
                            <span>Aucune recommendation disponible</span>
                        </div>
                    </div>
    
                </ng-container>
    
                <!--******************-->
                <!--******************-->
                <!--SAME TYPE ARTWORKS-->
                <!--******************-->
                <!--******************-->
                <ng-container *ngIf="left_container_category_index==1  ">
    
                    <div class="recommendation-group">
                        <div class="thumbnail-container" *ngFor="let item of list_of_recommendations_by_tag; let i=index">
    
                            <app-thumbnail-artwork *ngIf="item.chaptersnumber >=0"    [item]=item page='subscribings'
                                now_in_seconds={{now_in_seconds}} subscribing_category='comic' subscribing_format='serie'>
                            </app-thumbnail-artwork>
                            <app-thumbnail-artwork *ngIf="item.chaptersnumber == null"    [item]=item page='subscribings'
                                now_in_seconds={{now_in_seconds}} subscribing_category='comic' subscribing_format='one-shot'>
                            </app-thumbnail-artwork>
            
                        </div>
                        <div class="no-recommendation" *ngIf="!list_of_recommendations_by_tag.length">
                            <mat-icon [ngClass]="{'invisible': !show_icon }">info_outline</mat-icon>
                            <span>Aucune recommendation disponible</span>
                        </div>
                    </div>
                </ng-container>
            </div>
        </ng-container>

        

    </div>



    <!--!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!-->
    <!--!!!!!!!!! INFORMATIONS CONTAINER !!!!!!!!!!!!!-->
    <!--!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!-->
    <div #myScrollContainer class="artwork-about-container">
        

        <ng-container *ngIf=" !archive_retrieved || !mode_visiteur_added || !subscribtion_retrieved">
            
            
            <div class="artwork-title" >
            
                <div class="artwork-serie">
                    <div class="loading11 dark-shiny"></div>
                    <div class="loading12 dark-shiny" *ngIf="type=='serie'"></div>
                </div>

            </div>

            <div class="data-container">
                <div class="likes-and-loves-buttons">
                    <div class="loading13 dark-shiny">
                    </div>
                    <div class="loading13 dark-shiny">
                    </div>
                </div>
                
    
                <div class="view-and-date-numbers">
                    <span class="loading14 dark-shiny">
                    </span>
                </div>
                
            </div>

            <div class="author-container">
                <div class="left-container">

                    <div  class="dark-shiny"></div>
                </div>
                <div class="right-container">
                    <span class="author-name dark-shiny loading5">
        
                    </span>
                    <span class="author-description loading6 dark-shiny"></span>
                   
                   
                </div>
        
            </div>
    
    
            <div class="comment-container" >
                <div class=" loading5 dark-shiny"></div>
                
                <div class="first-comment-container loading9 dark-shiny">
                </div>
            </div>
            
    
            <div class="ad-container">
                <div class="dark-shiny loading-pic">
                </div>
            </div>
            
            
        
    
        </ng-container>



        <div class="artwork-title"  [ngClass]="{'really-invisible': !archive_retrieved || !mode_visiteur_added || !subscribtion_retrieved}">
            

            <div class="artwork-serie" >
                <div class="first-line">{{title}}</div> 
                <div class="second-line" *ngIf="type=='serie'">Chapitre {{current_chapter+1}} : {{current_chapter_title}}</div>
            </div>
            
            
            <div class="options-buttons options-buttons-artwork">

                <div *ngIf="archive_loading" class="archive-loading"> 
                    <mat-spinner diameter="18"  ></mat-spinner>
                </div>

                <button *ngIf="!archive_loading && subscribtion_retrieved && !mode_visiteur && type_of_comic_retrieved && thumbnail_picture_retrieved" tabIndex="-1" [matMenuTriggerFor]="artworkOptions01">
                    <mat-icon [ngClass]="{'invisible': !show_icon }" class="optionsButton">more_vert</mat-icon>
                </button>
                <mat-menu #artworkOptions01="matMenu" class="artwork-mat-menu">
                    <button class="artwork-button-menu-item" mat-menu-item (click)="edit_information();">
                        <mat-icon [ngClass]="{'invisible': !show_icon }">edit</mat-icon>
                        <span>Modifier les informations</span>
                    </button>
                    <button *ngIf="type=='serie'" class="artwork-button-menu-item" mat-menu-item (click)="edit_chapters();">
                        <mat-icon [ngClass]="{'invisible': !show_icon }">extension</mat-icon>
                        <span>Gestion des chapitres</span>
                    </button>
                    <button class="artwork-button-menu-item" mat-menu-item (click)="edit_thumbnail();">
                        <mat-icon [ngClass]="{'invisible': !show_icon }">view_carousel</mat-icon>
                        <span>Modifier la miniature</span>
                    </button>
                    <button *ngIf="!content_emphasized && status=='public'" class="artwork-button-menu-item" mat-menu-item (click)="emphasize()">
                        <mat-icon [ngClass]="{'invisible': !show_icon }">trending_up</mat-icon>
                        <span>Mettre l'oeuvre en avant</span>
                    </button>
                    <button *ngIf="content_emphasized && status=='public'" class="artwork-button-menu-item" mat-menu-item (click)="remove_emphasizing()">
                        <mat-icon [ngClass]="{'invisible': !show_icon }">trending_down</mat-icon>
                        <span>Annuler la mise en avant</span>
                    </button>
                    <button *ngIf="status=='public'" class="artwork-button-menu-item" mat-menu-item (click)="set_private();">
                        <mat-icon [ngClass]="{'invisible': !show_icon }">save_alt</mat-icon>
                        <span>Archiver</span>
                    </button>
                    <button *ngIf="status=='private'" class="artwork-button-menu-item" mat-menu-item (click)="set_public();">
                        <mat-icon [ngClass]="{'invisible': !show_icon }">unarchive</mat-icon>
                        <span>Désarchiver</span>
                    </button>
                    <button class="artwork-button-menu-item" mat-menu-item (click)="remove_artwork();">
                        <mat-icon [ngClass]="{'invisible': !show_icon }">clear</mat-icon>
                        <span>Supprimer</span>
                    </button>
                    <button class="artwork-button-menu-item" mat-menu-item *ngIf="monetization=='true' && status=='public'" disabled>
                        <mat-icon [ngClass]="{'invisible': !show_icon }">euro_symbol</mat-icon>
                        <span>Œuvre monétisée</span>
                    </button>
                </mat-menu>

                <!--options pour un visiteur -->
                <button *ngIf="!archive_loading && subscribtion_retrieved && mode_visiteur && archive_retrieved && type_of_account=='account'" class="optionsMenu" [matMenuTriggerFor]="artworkOptions02">
                    <mat-icon [ngClass]="{'invisible': !show_icon }" class="optionsButton">more_vert</mat-icon>
                </button>
                <mat-menu #artworkOptions02="matMenu" class="artwork-mat-menu">
                    <button *ngIf="mode_visiteur && !(list_of_reporters && list_of_reporters.indexOf(visitor_id)>=0)"
                        class="artwork-button-menu-item" tabIndex="-1" mat-menu-item (click)="report()">
                        <mat-icon [ngClass]="{'invisible': !show_icon }">flag</mat-icon>
                        <span>Signaler</span>
                    </button>
                    <button *ngIf="mode_visiteur && (list_of_reporters && list_of_reporters.indexOf(visitor_id)>=0)"
                        class="artwork-button-menu-item" tabIndex="-1" mat-menu-item (click)="cancel_report()">
                        <mat-icon [ngClass]="{'invisible': !show_icon }">flag</mat-icon>
                        <span>Annuler le signalement</span>
                    </button>
                    <button (click)="archive()" class="artwork-button-menu-item" mat-menu-item *ngIf="!content_archived">
                        <mat-icon [ngClass]="{'invisible': !show_icon }">save_alt</mat-icon>
                        <span>Archiver</span>
                    </button>
                    <button (click)="unarchive()" class="artwork-button-menu-item" mat-menu-item *ngIf="content_archived">
                        <mat-icon [ngClass]="{'invisible': !show_icon }">unarchive</mat-icon>
                        <span>Désarchiver</span>
                    </button>
                    <button class="artwork-button-menu-item" mat-menu-item (click)="open_chat_link()">
                        <mat-icon [ngClass]="{'invisible': !show_icon }">create</mat-icon>
                        <span>Écrire</span>
                    </button>
                </mat-menu>

            </div>

        </div>

       

        <div class="data-container" [ngClass]="{'really-invisible': !archive_retrieved || !mode_visiteur_added || !subscribtion_retrieved}">
            <div class="likes-and-loves-buttons">
                <button [disabled]="like_in_progress" class="like-background"
                    [ngClass]="{'liked': liked }" (click)="click_like();">
                    <mat-icon [ngClass]="{'invisible': !show_icon }">thumb_up</mat-icon>
                    <span>J'aime</span>
                </button>
                <button [disabled]="love_in_progress" class="love-background"
                    [ngClass]="{'loved': loved }" (click)="click_love();">
                    <mat-icon [ngClass]="{'invisible': !show_icon }">favorite</mat-icon>
                    <span>J'adore</span>
                </button>
            </div>
            
            <div class="likes-and-loves-numbers">
                <div class="d2-likes" (click)="show_likes()">
                    <span >{{likesnumber}}</span>
                </div>
                <div class="d2-loves" (click)="show_loves()">
                    <span >{{lovesnumber}}</span>
                </div>
            </div>


            <div class="view-and-date-numbers">
                <span>
                    <ng-container *ngIf="viewsnumber == 0">Aucune vue</ng-container>
                    <ng-container *ngIf="viewsnumber == 1">1 vue</ng-container>
                    <ng-container *ngIf="viewsnumber > 1">{{viewsnumber}} vues</ng-container>
                     • {{date_upload_to_show}}
                </span>
            </div>
            
        </div>


         <!--********************-->
        <!--Author container-->
        <!--********************-->
        <div class="author-container " [ngClass]="{'really-invisible': !archive_retrieved || !mode_visiteur_added || !subscribtion_retrieved}">
            <a [routerLink]=open_account() (click)="stop($event);add_time_of_view()"  [ngClass]="{'dark-shiny':!pp_loaded}"
            class="left-container"
            matTooltip="Voir le profil"
            matTooltipClass='linkarts-tooltip' 
            [matTooltipPosition]="'below'"
            [matTooltipShowDelay]="200">
                <img [src]="profile_picture" (load)="profile_picture_loaded()" [ngClass]="{'invisible':!pp_loaded}">
            </a>
            <div class="right-container">
                <span class="author-name" *ngIf="user_name!=''">
                    <a [routerLink]=open_account() (click)="stop($event);add_time_of_view()"
                    matTooltip="Voir le profil"
                    matTooltipClass='linkarts-tooltip' 
                    [matTooltipPosition]="'below'"
                    [matTooltipShowDelay]="200">
                        {{user_name}}
                    </a>

                    <mat-icon [ngClass]="{'invisible': !show_icon }" *ngIf="certified_account"
                    matTooltip="Compte certifié" 
                    matTooltipClass='linkarts-tooltip' 
                    [matTooltipPosition]="'below'"
                    [matTooltipShowDelay]="200">verified</mat-icon>

                    <span *ngIf="type_of_account_checked" class="pro-logo"
                    matTooltip="Compte professionnel" 
                    matTooltipClass='linkarts-tooltip'
                    [matTooltipPosition]="'below'"
                    [matTooltipShowDelay]="200">PRO</span>

                </span>
                <span class="author-description" *ngIf="pseudo!=''">@{{pseudo}}</span>
            </div>

            <div  *ngIf="subscribtion_retrieved && mode_visiteur" class="subscribing-container ">
                <button (click)="subscribtion()" [disabled]="loading_subscribtion" *ngIf="already_subscribed" [@enterAnimation] class="opened"
                tabIndex="-1">
                    <mat-icon [ngClass]="{'invisible': !show_icon }">notifications_active </mat-icon>
                    <span>Abonné(e)</span>
                </button>
                <button (click)="subscribtion()" [disabled]="loading_subscribtion" *ngIf="!already_subscribed" [@enterAnimation]
                tabIndex="-1">
                    <mat-icon [ngClass]="{'invisible': !show_icon }">person_add</mat-icon>
                    <span>S'abonner</span>
                </button>
            </div>

            
        </div>

         
        
        <div class="category-container" [ngClass]="{'really-invisible': !archive_retrieved || !mode_visiteur_added || !subscribtion_retrieved}">
            
            <div class="verso-type">
                <!--******************************************************-->
                <!--************************COMICS************************-->
                <!--******************************************************-->
                <a class="type-container" [routerLink]=get_link()
                matTooltip="Voir du contenu de ce genre"
                matTooltipClass='linkarts-tooltip'
                [matTooltipPosition]="'below'"
                [matTooltipShowDelay]="200"
                    (click)="stop($event);add_time_of_view()"><span>{{style}}</span></a>
                <div class="type-container" *ngIf="type=='one-shot'">
                    <span>One-shot</span></div>
                <div class="type-container" *ngIf="type=='serie'">
                    <span>Série</span>
                </div>
                
                <a class="type-container open-description" (click)="see_description();">
                    <mat-icon [ngClass]="{'invisible': !show_icon }">add</mat-icon>
                    <span>Voir plus</span>
                </a>
            </div>


            <!--<div class="tag-container">
                <a href="/main-research-style-and-tag/1/Comic/{{style}}/all">
                    <span>{{style}}</span>
                </a>
            </div>
            <div *ngIf="type=='serie'" class="tag-container"> <span>Série</span> </div>
            <div *ngIf="type=='one-shot'" class="tag-container"><span>One-shot</span> </div>-->
        </div>

       


        <div class="comment-container" (click)="see_comments();" [ngClass]="{'really-invisible': !archive_retrieved || !mode_visiteur_added || !subscribtion_retrieved}">
            <div class="number-of-comments" *ngIf="commentariesnumber">
                <span>Commentaires</span>
                <span class="second-span">&nbsp; ({{commentariesnumber}})</span>
            </div>
            <div class="number-of-comments" *ngIf="!commentariesnumber ">
                <span>Soyez le premier à ajouter un commentaire !</span>
            </div>
           
            
            <div class="first-comment-container" *ngIf="commentariesnumber && first_comment_retrieved">
                <div class="profile-picture " [ngClass]="{'dark-shiny': !first_comment_pp_loaded }">
                    <img [src]="pp_first_comment"  (load)="load_first_comment_pp()"  [ngClass]="{'invisible': !first_comment_pp_loaded }">
                </div>
                <div class="comment" >
                    {{first_comment}}
                </div>
            </div>
            <div class="first-comment-container loading9 dark-shiny" *ngIf="commentariesnumber && !first_comment_retrieved">
            </div>
        </div>
        

        <div class="ad-container" [ngClass]="{'really-invisible': !archive_retrieved || !mode_visiteur_added || !subscribtion_retrieved}">
            <div class="ad-link2">
                <span>Votre site a besoin de vous !</span>
            </div>
            <div class="ad">
            </div>
            <div class="ad-link">
                <span>Soutenez le site en faisant un don </span>
                <div class="ad-icon">
                </div>
            </div>
        </div>


        <div class="description-and-comments no-border-style" [ngClass]="{'really-invisible': !archive_retrieved || !mode_visiteur_added || !subscribtion_retrieved}">
            <div class="categories">
                <button [ngClass]="{'opened': category_index==0 }"
                    (click)="open_category(0);">
                    <mat-icon [ngClass]="{'invisible': !show_icon }">description</mat-icon>
                    <span>Description</span>
                </button>
                <button [ngClass]="{'opened': category_index==1 }"
                    (click)="open_category(1);">
                    <mat-icon [ngClass]="{'invisible': !show_icon }">comment</mat-icon>
                    <span>Commentaires <ng-container *ngIf="commentariesnumber>0">({{commentariesnumber}})</ng-container></span>
                    
                </button>
            </div>

            <ng-container *ngIf="category_index==0">
                <div class="verso-type">
                    <a class="type-container" [routerLink]=get_link()
                    matTooltip="Voir du contenu de ce style"
                    matTooltipClass='linkarts-tooltip'
                    [matTooltipPosition]="'below'"
                    [matTooltipShowDelay]="200"
                        (click)="stop($event);add_time_of_view()"><span>{{style}}</span></a>
                    <div class="type-container" *ngIf="type=='one-shot'">
                        <span>One-shot</span></div>
                    <div class="type-container" *ngIf="type=='serie'">
                        <span>Série</span>
                    </div>
                </div>
                <div class="verso-type">
                    <a class="type-container style" [routerLink]=get_style_link(0)
                    matTooltip="Voir du contenu de ce genre"
                    matTooltipClass='linkarts-tooltip'
                    [matTooltipPosition]="'below'"
                    [matTooltipShowDelay]="200"
                    *ngIf="firsttag"
                    (click)="stop($event);add_time_of_view()"><span>{{firsttag}}</span></a>
                    <a class="type-container style" [routerLink]=get_style_link(1)
                    matTooltip="Voir du contenu de ce genre"
                    matTooltipClass='linkarts-tooltip'
                    [matTooltipPosition]="'below'"
                    [matTooltipShowDelay]="200"
                    *ngIf="secondtag"
                    (click)="stop($event);add_time_of_view()"><span>{{secondtag}}</span></a>
                    <a class="type-container style" [routerLink]=get_style_link(2)
                    matTooltip="Voir du contenu de ce genre"
                    matTooltipClass='linkarts-tooltip'
                    [matTooltipPosition]="'below'"
                    [matTooltipShowDelay]="200"
                    *ngIf="thirdtag"
                    (click)="stop($event);add_time_of_view()"><span>{{thirdtag}}</span></a>
                </div>
                <div class="highlight">
                    <span>{{highlight}}</span>
                </div>
            </ng-container>

            
            <div [ngClass]="{'really-invisible': category_index!=1 }"  *ngIf="item_retrieved && mode_visiteur_added" >
                <app-comments 
                [type_of_account]=type_of_account 
                [title]="title"
                [visitor_id]="visitor_id"
                [visitor_name]="visitor_name"
                [visitor_mode]="mode_visiteur" 
                category='comic' 
                [format]=type
                [style]=style 
                [publication_id]=bd_id 
                [chapter_number]=current_chapter 
                [authorid]=authorid
                [number_of_comments_to_show]=number_of_comments_to_show 
                [commentariesnumber]=commentariesnumber 
                (first_comment)="first_comment_received($event)"
                (new_comment)="new_comment();"
                (removed_comment)="removed_comment();"></app-comments>
            </div>

        </div>
        
        <!--!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!-->
        <!--!!!!!!!! RECOMMENDATIONS CONTAINER !!!!!!!!!!!-->
        <!--!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!-->
        <div class="recommendations-container no-border-style" *ngIf="(!list_of_author_recommendations_retrieved || !list_of_recommendations_by_tag_retrieved) ">
            <div class="categories">
                <button [ngClass]="{'opened': left_container_category_index==0 }"
                    >
                    <mat-icon [ngClass]="{'invisible': !show_icon }">account_circle</mat-icon>
                    <span>Du même auteur</span>
                </button>
                <button [ngClass]="{'opened': left_container_category_index==1 }"
                  >
                    <mat-icon [ngClass]="{'invisible': !show_icon }">burst_mode</mat-icon>
                    <span>Similaires</span>
                </button>
            </div>
            <div class="recommendation-group" >
                <div class="no-recommendation">
                    <mat-spinner diameter="25"  style="margin:auto;"></mat-spinner>
                </div>
            </div>
            
        </div>
        <ng-container *ngIf="list_of_author_recommendations_retrieved && list_of_recommendations_by_tag_retrieved">
            <div class="recommendations-container">
            
                <div class="categories">
                    <button [ngClass]="{'opened': left_container_category_index==0 }"
                        (click)="open_left_container_category(0);">
                        <mat-icon [ngClass]="{'invisible': !show_icon }">account_circle</mat-icon>
                        <span>Du même auteur</span>
                    </button>
                    <button [ngClass]="{'opened': left_container_category_index==1 }"
                        (click)="open_left_container_category(1);">
                        <mat-icon [ngClass]="{'invisible': !show_icon }">burst_mode</mat-icon>
                        <span>Similaires</span>
                    </button>
                </div>
    
                <!--********************-->
                <!--********************-->
                <!--SAME AUTHOR ARTWORKS-->
                <!--********************-->
                <!--********************-->
                <ng-container *ngIf="left_container_category_index==0">
    
                    <div class="recommendation-group" *ngIf="list_of_author_recommendations_comics.length>0 ">
                        <div class="title">Bandes dessinées</div>
                        <div class="thumbnail-container" *ngFor="let item of list_of_author_recommendations_comics; let i=index">
    
                            <app-thumbnail-artwork *ngIf="item[0].chaptersnumber >=0"    [item]=item[0] page='subscribings'
                                now_in_seconds={{now_in_seconds}} subscribing_category='comic' subscribing_format='serie'>
                            </app-thumbnail-artwork>
                            <app-thumbnail-artwork *ngIf="item[0].chaptersnumber == null"    [item]=item[0] page='subscribings'
                                now_in_seconds={{now_in_seconds}} subscribing_category='comic' subscribing_format='one-shot'>
                            </app-thumbnail-artwork>
                        </div>
                    </div>
    
                    <!--<div class="recommendation-group" *ngIf="list_of_author_recommendations_drawings.length>0 ">
                        <div class="title">Dessins</div>
                        <div class="thumbnail-container" *ngFor="let item of list_of_author_recommendations_drawings; let i=index">
    
                            <app-thumbnail-artwork *ngIf="item[0].pagesnumber >=0"    [item]=item[0] page='subscribings'
                                now_in_seconds={{now_in_seconds}} subscribing_category='drawing' subscribing_format="artbook">
                            </app-thumbnail-artwork>
    
                            <app-thumbnail-artwork *ngIf="item[0].pagesnumber == null"    [item]=item[0] page='subscribings'
                                now_in_seconds={{now_in_seconds}} subscribing_category='drawing' subscribing_format="one-shot">
                            </app-thumbnail-artwork>
                        </div>
                    </div>
    
                    <div class="recommendation-group" *ngIf="list_of_author_recommendations_writings.length>0 ">
                        <div class="title">Écrits</div>
                        <div class="thumbnail-container" *ngFor="let item of list_of_author_recommendations_writings; let i=index">
                            <app-thumbnail-artwork [item]=item[0]    page='subscribings' now_in_seconds={{now_in_seconds}}
                                subscribing_category='writing'></app-thumbnail-artwork>
                        </div>
                    </div>-->
                    
                    <div class="recommendation-group" *ngIf="!list_of_author_recommendations_comics.length && !list_of_author_recommendations_drawings.length && !list_of_author_recommendations_writings.length">
                        <div class="no-recommendation">
                            <mat-icon [ngClass]="{'invisible': !show_icon }">info_outline</mat-icon>
                            <span>Aucune recommendation disponible</span>
                        </div>
                    </div>
    
                </ng-container>
    
                <!--******************-->
                <!--******************-->
                <!--SAME TYPE ARTWORKS-->
                <!--******************-->
                <!--******************-->
                <ng-container *ngIf="left_container_category_index==1  ">
    
                    <div class="recommendation-group">
                        <div class="thumbnail-container" *ngFor="let item of list_of_recommendations_by_tag; let i=index">
    
                            <app-thumbnail-artwork *ngIf="item.chaptersnumber >=0"    [item]=item page='subscribings'
                                now_in_seconds={{now_in_seconds}} subscribing_category='comic' subscribing_format='serie'>
                            </app-thumbnail-artwork>
                            <app-thumbnail-artwork *ngIf="item.chaptersnumber == null"    [item]=item page='subscribings'
                                now_in_seconds={{now_in_seconds}} subscribing_category='comic' subscribing_format='one-shot'>
                            </app-thumbnail-artwork>
            
                        </div>
                        <div class="no-recommendation" *ngIf="!list_of_recommendations_by_tag.length">
                            <mat-icon [ngClass]="{'invisible': !show_icon }">info_outline</mat-icon>
                            <span>Aucune recommendation disponible</span>
                        </div>
                    </div>
                </ng-container>
            </div>
        </ng-container>
    </div>





</div>