<div class="navbar-component">

  <div class="fixed-top" *ngIf="!connexion_status"
    [ngClass]="{'navbarBoxShadow': navbarBoxShadow,'really-invisible': connexion_status }">
    <div class="not-connected">
      Une erreur de connexion est survenue. Etes-vous bien connecté à internet ?
    </div>

  </div>


  <div class="fixed-top" *ngIf="navbar.visible "
    [ngClass]="{'navbarBoxShadow': navbarBoxShadow,'really-invisible': !connexion_status}">



    <!--Navbar : ligne 1 : logo / searchbar / icones-->
    <div class="navbar-container">
      <nav class="navbar first-navbar"
        [ngClass]="{'invisible': !logo_is_loaded, 'connected-user': type_of_profile=='account' || type_of_profile=='suspended', 'disconnected-user': type_of_profile!='account' && type_of_profile!='suspended'}">


        <!--Logo-->
        <a class="logoLinkarts" *ngIf="!activated_search" routerLink="/">
            <img class="logo" (load)="logo_loaded()" src='../../assets/img/svg/Logo-LA3.svg'>
        </a>


        <div class="HIDDEN-ON-SMALL-SCREEN-1" *ngIf="!activated_search"
          [ngClass]="{'invisible': !show_selector }">
          <div class="navbar2 flex-md-nowrap p-0">
            <a class="category" [ngClass]="{'opened': navbar.active_section==0 }" routerLink="/">
                <div class="icon-home" [ngClass]="{'icon-clicked': navbar.active_section==0 }"></div>
                <span>ACCUEIL</span>
            </a>
            <a class="category" [ngClass]="{'opened': navbar.active_section==1 }" routerLink="/linkcollab">
                <div class="icon-collaboration" [ngClass]="{'icon-clicked': navbar.active_section==1 }"></div>
                <span>COLLABORATIONS</span>
            </a>
            <!--<a class="category" [ngClass]="{'opened': navbar.active_section==2 }">
                <div class="icon-shopping" [ngClass]="{'icon-clicked': navbar.active_section==2 }"></div>
                <span>LIBRAIRIE</span>
            </a>-->
          </div>
        </div>

        <!--<div class="VISIBLE-ON-SMALL-SCREEN-1" [ngClass]="{'invisible': activated_search }">
          <select name="somename" class="NavbarSelectBox2" [ngClass]="{'really-invisible': !show_selector }">
            <option value="0">
              Accueil
            </option>
            <option value="1">
              Collaborations
            </option>
          </select>
        </div>-->
        <div class="VISIBLE-ON-SMALL-SCREEN-1 second-selector" [ngClass]="{'invisible': activated_search }">
          <mat-form-field floatLabel='never' [ngClass]="{'really-invisible': !show_selector }">
            <mat-select #navbarSelect2 panelClass="navbarSelectClass2" disableOptionCentering [(value)]="navbar.active_section" (selectionChange)="sectionChange2($event.value)">
              
              <mat-select-trigger>
                <ng-container *ngIf="navbar.active_section==0">Accueil</ng-container>
                <ng-container *ngIf="navbar.active_section==1">Collaborations</ng-container>
              </mat-select-trigger>

              <mat-option [value]="0" select>
                <div class="icon-home" [ngClass]="{'icon-clicked': navbar.active_section==0 }"></div>
                Accueil
              </mat-option>
              <mat-option [value]="1">
                <div class="icon-collaboration" [ngClass]="{'icon-clicked': navbar.active_section==1 }"></div>
                Collaborations
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>


        <ng-container *ngIf="type_of_profile_retrieved">

          <!--Barre de recherche-->
          <!--Barre de recherche-->
          <!--Barre de recherche-->
          <!--Barre de recherche-->
          <!--Barre de recherche-->
          <!--Barre de recherche-->
          <!--Barre de recherche-->


          <div class="navbar-l1-searchbar-container-activator" *ngIf="!activated_search">
            <button mat-icon-button class="searchbar-activator" (click)="activate_search();">
              <mat-icon class="optionsButton">search</mat-icon>
            </button>
          </div>

          <div class="navbar-l1-searchbar-container"
            [ngClass]="{'extended-searchbar': type_of_profile=='visitor', 'activated_searchbar': activated_search}">

            
            <div class="left-container first-selector" [ngClass]="{'invisible': !show_selector }">
              <mat-form-field floatLabel='never'>
                <mat-select #navbarSelect panelClass="navbarSelectClass" disableOptionCentering value="Tout" (selectionChange)="sectionChange($event.value)">
                  <mat-option value="Tout" select>Tout</mat-option>
                  <mat-option value="Compte">Compte</mat-option>
                  <mat-option value="Ad">Annonce</mat-option>
                  <mat-option value="Comic">Bande dessinée</mat-option>
                  <mat-option value="Drawing">Dessin</mat-option>
                  <mat-option value="Writing">Ecrit</mat-option>
                </mat-select>
              </mat-form-field>
            </div>

            <!--<div class="left-container" [ngClass]="{'invisible': !show_selector }">
              <select name="somename" class="NavbarSelectBox">
                <option value="All">Tout</option>
                <option value="Compte">Compte</option>
                <option value="Ad">Annonce</option>
                <option value="Comic">Bande dessinée</option>
                <option value="Drawing">Dessin</option>
                <option value="Writing">Ecrit</option>
              </select>
            </div>-->

            <div class="right-container">
              <div #propositions class="researches-propositions" *ngIf="show_researches_propositions" [@enterAnimation]>


                <div class="first-block" *ngIf="display_style_and_tag_research">
                  <div class="title-proposition">
                    Rechercher par style et par genre
                  </div>
                  <div class="first-block-container">
                    
                    <div class="swiper-container">
                      <div #swiperCategories2 class="swiper-item">
                          <div class="swiper-wrapper">
                              <div class="swiper-slide" *ngFor="let item of first_filters[indice_title_selected];let i=index">
                                  <a class="element" *ngIf="item!=''"
                                    (click)="cancel_research()" [routerLink]="open_research_style_and_tags(i)">
                                    <span>
                                      {{item}}
                                    </span>
                                  </a>
                              </div>
                          </div>
                      </div>
                      <div class="button-prev-shadow" *ngIf="swiper2" [ngClass]="{'invisible': swiper2.isBeginning }"></div>
                      <div class="button-next-shadow" *ngIf="swiper2" [ngClass]="{'invisible': swiper2.isEnd }"></div>
                      <div class="swiper-button-prev" [ngClass]="{'invisible': swiper2 && swiper2.isBeginning && swiper2.isEnd }"></div>
                      <div class="swiper-button-next" [ngClass]="{'invisible': swiper2 && swiper2.isBeginning && swiper2.isEnd }"></div>
                    </div>

                    <!--<ng-container *ngFor="let item of first_filters[indice_title_selected];let i=index">
                      <a class="string-proposition-container" *ngIf="item!=''" (click)="cancel_research();"
                        [routerLink]="open_research_style_and_tags(i)">
                        <span class="string-proposition">
                          {{item}}
                        </span>
                      </a>
                    </ng-container>-->
                  </div>
                </div>

                <div class="first-block"
                  *ngIf="show_most_researched_propositions && most_researched_propositions.length>0">
                  <div class="title-proposition">
                    Tendances
                  </div>
                  <div class="first-block-container">
                    
                    <!--<ng-container *ngFor="let item of most_researched_propositions;let i=index">
                      <a class="string-proposition-container" *ngIf="item.research_string!=''"
                        (click)="click_on_trending_message(i)" [routerLink]="get_trending_message(i)">
                        <span class="string-proposition">
                          {{item.research_string}}
                        </span>
                      </a>
                    </ng-container>-->
                                
                    <div class="swiper-container">
                      <div #swiperCategories class="swiper-item">
                          <div class="swiper-wrapper">
                              <div class="swiper-slide" *ngFor="let item of most_researched_propositions;let i=index">
                                  <a class="element" *ngIf="item.research_string!=''"
                                    (click)="click_on_trending_message(i)" [routerLink]="get_trending_message(i)">
                                    <span>
                                      {{item.research_string}}
                                    </span>
                                  </a>
                              </div>
                          </div>
                      </div>
                      <div class="button-prev-shadow" *ngIf="swiper" [ngClass]="{'invisible': swiper.isBeginning }"></div>
                      <div class="button-next-shadow" *ngIf="swiper" [ngClass]="{'invisible': swiper.isEnd }"></div>
                      <div class="swiper-button-prev" [ngClass]="{'invisible': swiper && swiper.isBeginning && swiper.isEnd }"></div>
                      <div class="swiper-button-next" [ngClass]="{'invisible': swiper && swiper.isBeginning && swiper.isEnd }"></div>
                    </div>
                  </div>
                </div>


                <!-- SHOW PROPOSITIONS AFTER RESEARCH-->
                <!-- SHOW PROPOSITIONS AFTER RESEARCH-->
                <!-- SHOW PROPOSITIONS AFTER RESEARCH-->

                <div class="second-block">

                  <div class="title-proposition spinner" *ngIf="!show_other_propositions &&  !show_first_propositions && !loading_recent">
                    <mat-spinner diameter="20"></mat-spinner>
                  </div>

                  <ng-container *ngIf="show_other_propositions">

                    <div class="title-proposition" *ngIf="loading_other">
                      Meilleures propositions
                      &nbsp; <span>.</span><span>.</span><span>.</span>
                    </div>

                    <div class="title-proposition" *ngIf="list_of_first_propositions.length>0 && !loading_other">
                      Meilleures propositions
                    </div>


                    <div class="no-results" *ngIf="0>=list_of_first_propositions.length && !loading_other">
                      Aucun résultat
                    </div>
                    <div class="propositions-container"  *ngIf="!loading_other">
                      <div *ngFor="let item of list_of_first_propositions;let i=index"
                        (click)="add_clicked_after_research(i)">

                        <!--Account -->
                        <!--Account -->

                        <a class="item-row" *ngIf="item.publication_category=='Account'" (click)="open_account(i)"
                          [routerLink]="get_account(i)">
                          <div class="result-container">
                            <div class="image-container">
                              <img [src]="list_of_thumbnails[i]" (load)="pp_thumb_load(i)"
                                [ngClass]="{'invisible': !pp_thumb_is_loaded[i] }">
                            </div>
                            <div class="name-container block">
                              <div>{{list_of_last_propositions[i].firstname}} {{list_of_last_propositions[i].lastname}}
                              </div>
                              <div class="nickname">@{{list_of_last_propositions[i].nickname}}</div>
                            </div>
                            <div class="type-container">
                              <span>{{list_of_last_propositions[i].type_of_account}}</span>
                            </div>
                          </div>

                        </a>

                        <!--AD -->
                        <!--AD -->

                        <a class="item-row" *ngIf="item.publication_category=='Ad'"
                          (click)="open_ad_last_propositions(i);" [routerLink]="get_ad_last_propositions(i)">
                          <div class="result-container">
                            <div class="image-container">
                              <img [src]="list_of_thumbnails[i]" (load)="pp_thumb_load(i)"
                                [ngClass]="{'invisible': !pp_thumb_is_loaded[i] }">
                            </div>
                            <div class="name-container">
                              <span>{{list_of_last_propositions[i].title}}</span>
                            </div>
                            <div class="type-container">
                              <span>Annonce</span>
                            </div>
                          </div>

                        </a>

                        <!--ARTPIECEES -->
                        <!--ARTPIECEES -->

                        <a class="item-row"
                          *ngIf="item.publication_category=='Comic' || item.publication_category=='Drawing' || item.publication_category=='Writing'"
                          (click)="open_artwork_last_proposition(item,i)"
                          [routerLink]="get_artwork_last_proposition(item,i)">

                          <div class="result-container">
                            <div class="image-container">
                              <img [src]="list_of_thumbnails[i]" (load)="pp_thumb_load(i)"
                                [ngClass]="{'invisible': !pp_thumb_is_loaded[i] }">
                            </div>
                            <div class="name-container">
                              <span>{{list_of_last_propositions[i].title}}</span>
                            </div>
                            <div class="type-container">
                              <span *ngIf="item.publication_category=='Comic'">Bande dessinée</span>
                              <span *ngIf="item.publication_category=='Drawing'">Dessin</span>
                              <span *ngIf="item.publication_category=='Writing'">Ecrit</span>
                            </div>
                          </div>

                        </a>

                      </div>
                    </div>
                  </ng-container>

                </div>

                <!-- SHOW FIRST PROPOSITIONS -->
                <!-- SHOW FIRST PROPOSITIONS -->
                <!-- SHOW FIRST PROPOSITIONS -->

                <div class="second-block">

                  <ng-container *ngIf="!show_first_propositions && loading_recent && !show_other_propositions">
                    <div class="title-proposition spinner">
                      <mat-spinner diameter="20"></mat-spinner>
                    </div>
                  </ng-container>

                  <ng-container *ngIf="show_first_propositions">
                    <div class="title-proposition" *ngIf="first_option">
                      Récents
                    </div>
                    <div class="title-proposition" *ngIf="!first_option">
                      Meilleures propositions
                    </div>
                    <div *ngIf="!loading_recent" style="display:block">

                      <div *ngIf="list_of_first_propositions_history.length==0" class="no-results">
                        <span>
                          Aucune proposition disponible pour le moment
                        </span>
                      </div>

                      <div class="list-of-propositions"
                        *ngFor="let item of list_of_first_propositions_history;let i=index">

                        <!-- ACCOUNT -->
                        <!-- ACCOUNT -->
                        <!-- ACCOUNT -->

                        <div class="item-row" *ngIf="item.publication_category=='Account'">

                          <a class="result-container" (click)="open_history_account(i);" [routerLink]="get_history_account(i)">
                            <div class="image-container">
                              <img [src]="list_of_thumbnails_history[i]" (load)="pp_thumb_hist_load(i)"
                                [ngClass]="{'invisible': !pp_thumb_hist_is_loaded[i] }">
                            </div>
                            <div class="name-container block">
                              <div>{{list_of_last_propositions_history[i].firstname}}
                                {{list_of_last_propositions_history[i].lastname}} </div>
                              <div class="nickname">@{{list_of_last_propositions_history[i].nickname}}</div>
                            </div>
                            <div class="type-container" [ngClass]="{'with-close': first_option }">
                              <span>{{list_of_last_propositions_history[i].type_of_account}}</span>
                            </div>
                          </a>

                          <button *ngIf="first_option" (click)="delete_from_history(i,$event)">
                            <mat-icon>close</mat-icon>
                          </button>
                        </div>

                        <!-- AD -->
                        <!-- AD -->
                        <!-- AD -->

                        <div class="item-row" *ngIf="item.publication_category=='Ad'">

                          <a class="result-container"
                          (click)="open_ad_last_propositions_history(i);"
                          [routerLink]="get_ad_last_propositions_history(i)">

                            <div class="image-container">
                              <img [src]="list_of_thumbnails_history[i]" (load)="pp_thumb_hist_load(i)"
                                [ngClass]="{'invisible': !pp_thumb_hist_is_loaded[i] }">
                            </div>
                            <div class="name-container">
                              <span>{{list_of_last_propositions_history[i].title}}</span>
                            </div>
                            <div class="type-container" [ngClass]="{'with-close': first_option }">
                              <span>Annonce</span>
                            </div>
                          </a>

                          <button *ngIf="first_option" (click)="delete_from_history(i,$event)">
                            <mat-icon>close</mat-icon>
                          </button>

                        </div>

                        <!-- Comic writing drawing -->
                        <!-- Comic writing drawing -->
                        <!-- Comic writing drawing -->

                        <div class="item-row"
                          *ngIf="item.publication_category=='Comic' || item.publication_category=='Drawing' || item.publication_category=='Writing'">

                          <a class="result-container"
                          (click)="open_artwork_last_proposition_history(item,i);"
                          [routerLink]="get_artwork_last_proposition_history(item,i)">
                            <div class="image-container">
                              <img [src]="list_of_thumbnails_history[i]" (load)="pp_thumb_hist_load(i)"
                                [ngClass]="{'invisible': !pp_thumb_hist_is_loaded[i] }">
                            </div>
                            <div class="name-container">
                              <span>{{list_of_last_propositions_history[i].title}}</span>
                            </div>
                            <div class="type-container" [ngClass]="{'with-close': first_option }">
                              <span *ngIf="item.publication_category=='Comic'">Bande dessinée</span>
                              <span *ngIf="item.publication_category=='Drawing'">Dessin</span>
                              <span *ngIf="item.publication_category=='Writing'">Ecrit</span>
                            </div>
                          </a>

                          <button *ngIf="first_option" (click)="delete_from_history(i,$event)">
                            <mat-icon>close</mat-icon>
                          </button>
                        </div>

                      </div>
                    </div>
                  </ng-container>

                </div>


              </div>

              <input #input (click)="activateFocus()" (input)="researches_propositions($event);"
                (keydown)="keydown_researches_propositions($event);" onblur="this.placeholder = 'Rechercher'"
                class="form-control form-control-dark large-form" type="text" [placeholder]="'Rechercher'">

              <div class="loupe-container" #searchicon>
                <mat-icon *ngIf="!loading_research" (click)="click_on_research()">search</mat-icon>
                <mat-spinner *ngIf="loading_research" diameter="20"></mat-spinner>
              </div>


            </div>



          </div>

          <!--Barre de recherche FIN -->
          <!--Barre de recherche FIN -->
          <!--Barre de recherche FIN -->
          <!--Barre de recherche FIN -->
          <!--Barre de recherche FIN -->
          <!--Barre de recherche FIN -->
          <!--Barre de recherche FIN -->




          <div class="icon-messenger-invisible">
          </div>
          <div class="icon-bell-invisible">
          </div>
          <!--icon part-->
          <div class="navbar-l1-icons-container notifications-block" *ngIf="(type_of_profile=='account' || type_of_profile=='suspended') && !activated_search">


            <div #chat class="icon-container" [ngClass]="{ 'shiny': !pp_is_loaded || !data_retrieved}">
              <div class="icon icon-messenger" (click)="open_messages()"
                [ngClass]="{ 'invisible': !pp_is_loaded || !data_retrieved}"></div>
              <ng-container *ngIf="number_of_unseen_messages>0">

                <div #number_of_notifs [ngClass]="{ 'invisible': !pp_is_loaded || !data_retrieved || !using_chat_retrieved || using_chat,
                                  'notif-size-1':10>number_of_unseen_messages,
                                  'notif-size-2':100>number_of_unseen_messages && number_of_unseen_messages>=10,
                                  'notif-size-3':number_of_unseen_messages>=100}" style="cursor:pointer;"
                  (click)="open_messages_notifs($event);">
                  <div class="number-of-notifs" [ngClass]="{ 'invisible': !pp_is_loaded || !data_retrieved}">
                    <div *ngIf="number_of_unseen_messages>=100" [@enterAnimation]>
                      +99
                    </div>
                    <div *ngIf="100>number_of_unseen_messages" [@enterAnimation]>
                      {{number_of_unseen_messages}}
                    </div>
                  </div>
                </div>
                
              </ng-container>



              <div class="notifications-chat-container "
                *ngIf="show_chat_messages && data_retrieved && using_chat_retrieved" [@enterAnimation]>

                <div #myScrollContainer_chat class="notifications-container ">
                  <div class="loading-page" *ngIf="!list_of_friends_retrieved ">
                    <mat-spinner diameter="20"></mat-spinner>
                  </div>
                  <div *ngIf="list_of_friends_retrieved">

                    <div *ngFor="let item of list_of_friends_ids.slice(0,number_of_friends_to_show); let i=index" class="subscriber-card" [ngClass]="{'invisible':!show_chat_messages}">
                      <a class="author-container" (click)="open_chat_2(i);" [routerLink]="get_chat_2(i)">
                        <div class="left-container">
                          <img [src]="list_of_friends_profile_pictures[i]">
                          <div class="connection-state-container" *ngIf="connections_status_retrieved">
                            <div *ngIf="list_of_friends_connected[i]">
                              <mat-icon style="font-size: 25px;margin: auto 5px auto auto; color:green">done</mat-icon>
                            </div>
                            <div *ngIf="!list_of_friends_connected[i]">
                              <div style="width: 40px; font-size: 12px;"
                                *ngIf="list_of_last_connection_dates[i] && list_of_last_connection_dates[i]!='0 min'">
                                {{list_of_last_connection_dates[i]}} 
                              </div>
                            </div>
                          </div>
                        </div>

                        <div class="right-container">
                          <span class="author-name">{{list_of_friends_names[i]}} </span>
                          <div class="last-message-container" *ngIf="list_of_friends_last_message[i]">
                            <div class="last-message">

                              <!--------------------------- AN ATTACHMENT FROM USER ----------------------------->
                              <!--------------------------- AN ATTACHMENT FROM USER ----------------------------->
                              <!--------------------------- AN ATTACHMENT FROM USER ----------------------------->
                              <div *ngIf="list_of_friends_last_message[i].is_an_attachment">
                                <!--------------------------- FRIEND CHAT ----------------------------->
                                <!--------------------------- FRIEND CHAT ----------------------------->
                                <ng-container *ngIf="list_of_friends_types[i]=='user'">
                                  <div *ngIf="list_of_friends_last_message[i].status=='seen'">
                                    <div *ngIf="list_of_friends_last_message[i].attachment_type=='picture_message' ">
                                      <div *ngIf="list_of_friends_last_message[i].id_user==user_id">
                                        vous avez envoyé une image
                                      </div>
                                      <div *ngIf="list_of_friends_last_message[i].id_user!=user_id">
                                        vous a envoyé une image
                                      </div>
                                    </div>
                                    <div
                                      *ngIf="list_of_friends_last_message[i].attachment_type=='picture_attachment' || list_of_friends_last_message[i].attachment_type=='file_attachment'">
                                      <div *ngIf="list_of_friends_last_message[i].id_user==user_id">
                                        vous avez envoyé une pièce jointe
                                      </div>
                                      <div *ngIf="list_of_friends_last_message[i].id_user!=user_id">
                                        vous a envoyé une pièce jointe
                                      </div>
                                    </div>
                                  </div>

                                  <div *ngIf="list_of_friends_last_message[i].status=='received'">
                                    <div *ngIf="list_of_friends_last_message[i].attachment_type=='picture_message' ">
                                      <div *ngIf="list_of_friends_last_message[i].id_user==user_id">
                                        <b> vous avez envoyé une image</b>
                                      </div>
                                      <div *ngIf="list_of_friends_last_message[i].id_user!=user_id">
                                        <b> vous a envoyé une image</b>
                                      </div>
                                    </div>
                                    <div
                                      *ngIf="list_of_friends_last_message[i].attachment_type=='picture_attachment' || list_of_friends_last_message[i].attachment_type=='file_attachment'">
                                      <div *ngIf="list_of_friends_last_message[i].id_user==user_id">
                                        <b>vous avez envoyé une pièce jointe </b>
                                      </div>
                                      <div *ngIf="list_of_friends_last_message[i].id_user!=user_id">
                                        <b>vous a envoyé une pièce jointe </b>
                                      </div>
                                    </div>
                                  </div>
                                </ng-container>

                                <!--------------------------- GROUP CHAT ----------------------------->
                                <!--------------------------- GROUP CHAT ----------------------------->
                                <ng-container>

                                  <div *ngIf="list_of_friends_types[i]!='user'">
                                    <div *ngIf="list_of_friends_last_message[i].attachment_type=='picture_message' ">
                                      <div
                                        *ngIf="list_of_friends_last_message[i].id_user==user_id && !(list_of_friends_last_message[i].list_of_users_who_saw.length>1)">
                                        <b> vous avez envoyé une image </b>
                                      </div>
                                      <div
                                        *ngIf="list_of_friends_last_message[i].id_user==user_id && list_of_friends_last_message[i].list_of_users_who_saw.length>1">
                                        vous avez envoyé une image
                                      </div>
                                      <div
                                        *ngIf="list_of_friends_last_message[i].id_user!=user_id && !(list_of_friends_last_message[i].list_of_users_who_saw.indexOf(user_id)>=0)">
                                        <b> {{list_of_friends_last_message[i].id_user_name}} vous a envoyé une image</b>
                                      </div>
                                      <div
                                        *ngIf="list_of_friends_last_message[i].id_user!=user_id && (list_of_friends_last_message[i].list_of_users_who_saw.indexOf(user_id)>=0)">
                                        {{list_of_friends_last_message[i].id_user_name}} vous a envoyé une image
                                      </div>

                                    </div>
                                    <div
                                      *ngIf="list_of_friends_last_message[i].attachment_type=='picture_attachment' || list_of_friends_last_message[i].attachment_type=='file_attachment'">
                                      <div
                                        *ngIf="list_of_friends_last_message[i].id_user==user_id && !(list_of_friends_last_message[i].list_of_users_who_saw.length>1)">
                                        <b>vous avez envoyé une pièce jointe </b>
                                      </div>
                                      <div
                                        *ngIf="list_of_friends_last_message[i].id_user!=user_id && !(list_of_friends_last_message[i].list_of_users_who_saw.indexOf(user_id)>=0)">
                                        <b> {{list_of_friends_last_message[i].id_user_name}} vous a envoyé une pièce
                                          jointe </b>
                                      </div>
                                      <div
                                        *ngIf="list_of_friends_last_message[i].id_user==user_id && list_of_friends_last_message[i].list_of_users_who_saw.length>1">
                                        vous avez envoyé une pièce jointe
                                      </div>
                                      <div
                                        *ngIf="list_of_friends_last_message[i].id_user!=user_id  && list_of_friends_last_message[i].list_of_users_who_saw.indexOf(user_id)>=0">
                                        {{list_of_friends_last_message[i].id_user_name}} vous a envoyé une pièce jointe
                                      </div>
                                    </div>
                                  </div>
                                </ng-container>
                              </div>

                              <!--------------------------- NOT AN ATTACHMENT ----------------------------->
                              <!--------------------------- NOT AN ATTACHMENT ----------------------------->
                              <!--------------------------- NOT AN ATTACHMENT ----------------------------->

                              <div *ngIf="!list_of_friends_last_message[i].is_an_attachment">

                                <!--------------------------- FROM USER ----------------------------->
                                <!--------------------------- FROM USER ----------------------------->
                                <!--------------------------- FROM USER ----------------------------->

                                <!-- friend MESSAGE -->
                                <!-- friend MESSAGE -->
                                <!-- friend MESSAGE -->

                                <ng-container *ngIf="list_of_friends_types[i]=='user'">
                                  <div
                                    *ngIf="list_of_friends_last_message[i].id_user!=user_id && !list_of_friends_last_message[i].is_from_server  && list_of_friends_last_message[i].status!='deleted'">
                                    <div *ngIf="list_of_friends_last_message[i].status=='seen'">
                                      {{list_of_friends_last_message[i].message}}
                                    </div>
                                    <div *ngIf="list_of_friends_last_message[i].status=='received'">
                                      <b>{{list_of_friends_last_message[i].message}}</b>
                                    </div>
                                  </div>
                                  <div
                                    *ngIf="list_of_friends_last_message[i].id_user==user_id && !list_of_friends_last_message[i].is_from_server && list_of_friends_last_message[i].status!='deleted'">
                                    <div *ngIf="list_of_friends_last_message[i].status=='seen'">
                                      moi : {{list_of_friends_last_message[i].message}}
                                    </div>
                                    <div *ngIf="list_of_friends_last_message[i].status=='received'">
                                      <b>moi : {{list_of_friends_last_message[i].message}}</b>
                                    </div>
                                  </div>

                                </ng-container>

                                <!-- GROUP MESSAGE -->
                                <!-- GROUP MESSAGE -->
                                <!-- GROUP MESSAGE -->

                                <ng-container *ngIf="list_of_friends_types[i]!='user'">
                                  <div
                                    *ngIf="list_of_friends_last_message[i].id_user!=user_id && !list_of_friends_last_message[i].is_from_server  && list_of_friends_last_message[i].status!='deleted'">
                                    <div
                                      *ngIf="list_of_friends_last_message[i].list_of_users_who_saw.indexOf(user_id)>=0">
                                      {{list_of_friends_last_message[i].message}}
                                    </div>
                                    <div
                                      *ngIf="0>list_of_friends_last_message[i].list_of_users_who_saw.indexOf(user_id)">
                                      <b>{{list_of_friends_last_message[i].message}}</b>
                                    </div>
                                  </div>
                                  <div
                                    *ngIf="list_of_friends_last_message[i].id_user==user_id && !list_of_friends_last_message[i].is_from_server && list_of_friends_last_message[i].status!='deleted'">
                                    <div *ngIf="list_of_friends_last_message[i].list_of_users_who_saw.length>1">
                                      moi : {{list_of_friends_last_message[i].message}}
                                    </div>
                                    <div *ngIf="list_of_friends_last_message[i].list_of_users_who_saw.length==1">
                                      <b>moi : {{list_of_friends_last_message[i].message}}</b>
                                    </div>
                                  </div>
                                </ng-container>

                                <div *ngIf="list_of_friends_last_message[i].status=='deleted'">
                                  message supprimé
                                </div>

                                <!--------------------------- FROM SERVER ----------------------------->
                                <!--------------------------- FROM SERVER ----------------------------->
                                <!--------------------------- FROM SERVER ----------------------------->

                                <div *ngIf="list_of_friends_last_message[i].is_from_server">
                                  <!------------------------------------------- NEW CONTACT OR NEW GROUP-------------------------------------->

                                  <div
                                    *ngIf="!list_of_friends_last_message[i].is_a_group_chat && list_of_friends_last_message[i].message=='New' ">
                                    {{list_of_friends_names[i]}} fait désormais parti de vos contacts. Vous pouvez donc
                                    échanger librement.
                                  </div>
                                  <div
                                    *ngIf="list_of_friends_last_message[i].is_a_group_chat  && list_of_friends_last_message[i].message=='New'">
                                    <div
                                      *ngIf="list_of_friends_last_message[i].list_of_users_who_saw.indexOf(user_id)>=0">
                                      Bienvenue dans le groupe : {{list_of_friends_names[i]}}.
                                    </div>
                                    <div
                                      *ngIf="0>list_of_friends_last_message[i].list_of_users_who_saw.indexOf(user_id)">
                                      <b>Bienvenue dans le groupe : {{list_of_friends_names[i]}}.</b>
                                    </div>
                                  </div>

                                  <!------------------------------------------- FRIEND EXIT GROUP -------------------------------------->

                                  <div class="new-contact-message-content"
                                    *ngIf="list_of_friends_last_message[i].message=='Exit'">
                                    <span *ngIf="list_of_friends_last_message[i].real_id_user">
                                      <div
                                        *ngIf="list_of_friends_last_message[i].list_of_users_who_saw.indexOf(user_id)>=0">
                                        {{list_of_friends_last_message[i].real_id_user}} a quitté le groupe
                                      </div>
                                      <div
                                        *ngIf="0>list_of_friends_last_message[i].list_of_users_who_saw.indexOf(user_id)">
                                        <b> {{list_of_friends_last_message[i].real_id_user}} a quitté le groupe</b>
                                      </div>

                                    </span>
                                    <span *ngIf="!list_of_friends_last_message[i].real_id_user">
                                      <div
                                        *ngIf="list_of_friends_last_message[i].list_of_users_who_saw.indexOf(user_id)>=0">
                                        {{list_of_friends_last_message[i].id_user}} a quitté le groupe
                                      </div>
                                      <div
                                        *ngIf="0>list_of_friends_last_message[i].list_of_users_who_saw.indexOf(user_id)">
                                        <b> {{list_of_friends_last_message[i].id_user}} a quitté le groupe</b>
                                      </div>

                                    </span>
                                  </div>

                                  <!------------------------------------------- NEW FRIEND JOIN GROUP -------------------------------------->
                                  <div class="new-contact-message-content"
                                    *ngIf="list_of_friends_last_message[i].message=='New_friend_in_the_group'">
                                    <div
                                      *ngFor="let item of list_of_friends_last_message[i].list_of_names_added; let j=index">
                                      <span *ngIf="list_of_friends_last_message[i].real_id_user">
                                        <div
                                          *ngIf="list_of_friends_last_message[i].list_of_users_who_saw.indexOf(user_id)>=0">
                                          {{list_of_friends_last_message[i].real_id_user}} a ajouté {{item}} au groupe.
                                        </div>
                                        <div
                                          *ngIf="0>list_of_friends_last_message[i].list_of_users_who_saw.indexOf(user_id)">
                                          <b> {{list_of_friends_last_message[i].real_id_user}} a ajouté {{item}} au
                                            groupe.</b>
                                        </div>

                                      </span>
                                      <span *ngIf="!list_of_friends_last_message[i].real_id_user">
                                        <div
                                          *ngIf="list_of_friends_last_message[i].list_of_users_who_saw.indexOf(user_id)>0">
                                          {{list_of_friends_last_message[i].id_user}} a ajouté {{item}} au groupe.
                                        </div>
                                        <div
                                          *ngIf="0>list_of_friends_last_message[i].list_of_users_who_saw.indexOf(user_id)">
                                          <b> {{list_of_friends_last_message[i].id_user}} a ajouté {{item}} au
                                            groupe.</b>
                                        </div>

                                      </span>
                                    </div>
                                  </div>
                                </div>


                              </div>
                            </div>

                            <div *ngIf="!list_of_friends_last_message[i].date" class="date-container">
                              - {{show_date_of_timestamp(list_of_friends_last_message[i],i)}}
                            </div>
                            <div *ngIf="list_of_friends_last_message[i].date" class="date-container">
                              - {{list_of_friends_last_message[i].date}}
                            </div>

                          </div>

                        </div>
                      </a>
                    </div>
                  </div>
                </div>

                <a class="open-chat" routerLink="/chat" *ngIf="list_of_friends_retrieved">
                  <span> Consulter la messagerie</span>
                </a>
              </div>
            </div>


            <!-- ---------------------------NOTIFICATIONS----------------------------------->
            <!-- ---------------------------NOTIFICATIONS----------------------------------->
            <!-- ---------------------------NOTIFICATIONS----------------------------------->
            <!-- ---------------------------NOTIFICATIONS----------------------------------->

            <div #notifications class="icon-container" [ngClass]="{ 'shiny': !pp_is_loaded || !data_retrieved}">
              <div class="icon icon-bell" (click)="open_notifications() "
                [ngClass]="{ 'invisible': !pp_is_loaded || !data_retrieved}">
              </div>
              <ng-container *ngIf="number_of_unchecked_notifications>0">
                <div [ngClass]="{ 'invisible':!pp_is_loaded || !data_retrieved || !using_chat_retrieved || using_chat,
                                  'notif-size-1':10>number_of_unchecked_notifications,
                                  'notif-size-2':100>number_of_unchecked_notifications && number_of_unchecked_notifications>=10,
                                  'notif-size-3':number_of_unchecked_notifications>=100}" style="cursor:pointer;"

                                  (click)="open_notifications_notifs($event);">
                  <div class="number-of-notifs" [ngClass]="{ 'invisible': !pp_is_loaded || !data_retrieved}">
                    <div *ngIf="number_of_unchecked_notifications>=100" [@enterAnimation]>
                      +99
                    </div>
                    <div *ngIf="100>number_of_unchecked_notifications" [@enterAnimation]>
                      {{number_of_unchecked_notifications}}
                    </div>
                  </div>
                </div>
              </ng-container>






              <div class="notifications-chat-container" *ngIf="show_notifications && data_retrieved" [@enterAnimation]>
                <div #myScrollContainer class="notifications-container notifications-model">

                  <!--IF NO NOTIFICATION TO SHOW-->
                  <ng-container
                    *ngIf="final_list_of_notifications_to_show.slice(0,index_of_notifications_to_show).length == 0">
                    <div class="no-notification">
                      <span>Aucune notification</span>
                    </div>
                  </ng-container>
                  <div
                    *ngFor="let notif of final_list_of_notifications_to_show.slice(0,index_of_notifications_to_show),let i=index"
                    class="subscriber-card"
                    [ngClass]="{'really-invisible':!final_list_of_notifications_to_show[i],'not-seen':list_of_notifications[i].status!='checked','seen':list_of_notifications[i].status=='checked'}">


                    <div class="author-container" *ngIf="notif">
                       <!-- ---------------------------subscribtion----------------------------------->
                      <!-- ---------------------------subscribtion----------------------------------->
                      <ng-container *ngIf="notif.type=='subscribtion'">

                        <a (click)="close_notifications();" [routerLink]="get_account_for_notification(notif)">
                          <div class="left-container">
                            <img [src]="list_of_notifications_profile_pictures[i]" (load)="load_notification_pp(i)"
                              [ngClass]="{'invisible':!notification_loaded[i]}">
                            <div class="notification-icon group">
                              <mat-icon>person_add</mat-icon>
                            </div>
                          </div>
                          <div class="right-container">
                            <span><b>{{notif.id_user_name}}</b> a commencé à vous suivre</span>
                            <span class="notification-date">{{list_of_notifications_dates[i]}}</span>
                          </div>
                        </a>
                      </ng-container>
                      <!-- ---------------------------trendings----------------------------------->
                      <!-- ---------------------------trendings----------------------------------->
                      <ng-container *ngIf="notif.type=='trendings'">

                        <a (click)="open_my_trending(notif.publication_category);" [routerLink]="get_my_trending(notif.publication_category)">
                          <div class="left-container">
                            <img [src]="list_of_notifications_profile_pictures[i]" (load)="load_notification_pp(i)"
                              [ngClass]="{'invisible':!notification_loaded[i]}">
                            <div class="notification-icon trendings">
                              <mat-icon>local_fire_department</mat-icon>
                            </div>
                          </div>
                          <div class="right-container">
                            <span *ngIf="notif.publication_category=='comic'"><b>Bravo !</b> Votre bande dessinée
                              <b>"{{notif.publication_name}}"</b> a atteint le top <b>{{notif.chapter_number}}</b> des
                              tendances</span>
                            <span *ngIf="notif.publication_category=='drawing'"><b>Bravo !</b> Votre artbook
                              <b>"{{notif.publication_name}}"</b> a atteint le top <b>{{notif.chapter_number}}</b> des
                              tendances</span>
                            <span *ngIf="notif.publication_category=='writing'"><b>Bravo !</b> votre écrit
                              <b>"{{notif.publication_name}}"</b> a atteint le top <b>{{notif.chapter_number}}</b> des
                              tendances</span>
                            <span class="notification-date">{{list_of_notifications_dates[i]}}</span>
                          </div>
                        </a>
                      </ng-container>
                      <!-- ---------------------------group_creation_validation_exit_about----------------------------------->
                      <!-- ---------------------------group_creation_validation_exit_about----------------------------------->
                      <ng-container *ngIf="notif.type=='group_creation'">

                        <a (click)="open_my_account();" [routerLink]="get_my_account()">
                          <div class="left-container">
                            <img [src]="list_of_notifications_profile_pictures[i]" (load)="load_notification_pp(i)"
                              [ngClass]="{'invisible':!notification_loaded[i]}">
                            <div class="notification-icon group">
                              <mat-icon>group</mat-icon>
                            </div>
                          </div>
                          <div class="right-container">
                            <span *ngIf="user_id!=notif.id_user"><b>{{notif.id_user_name}}</b> a créé le groupe
                              <b>"{{notif.publication_name}}"</b> et attend votre confirmation</span>
                            <span *ngIf="user_id==notif.id_user">Vous avez une demande de confirmation en attente
                              concernant le groupe <b>"{{notif.publication_name}}"</b></span>
                            <span class="notification-date">{{list_of_notifications_dates[i]}}</span>
                          </div>
                        </a>
                      </ng-container>
                      <ng-container *ngIf="notif.type=='group_validation'">

                        <a (click)="open_my_account();" [routerLink]="get_my_account()">
                          <div class="left-container">
                            <img [src]="list_of_notifications_profile_pictures[i]" (load)="load_notification_pp(i)"
                              [ngClass]="{'invisible':!notification_loaded[i]}">
                            <div class="notification-icon group">
                              <mat-icon>group</mat-icon>
                            </div>
                          </div>
                          <div class="right-container">
                            <span *ngIf="notif.information!='add_and_shares'"><b>{{notif.id_user_name}}</b> a validé la
                              création ainsi que la répartition des gains du groupe <b>"{{notif.publication_name}}"</b>
                            </span>
                            <span *ngIf="notif.information=='add_and_shares'"><b>{{notif.id_user_name}}</b> a modifié la
                              répartition des gains du groupe <b>"{{notif.publication_name}}"</b> </span>
                            <span class="notification-date">{{list_of_notifications_dates[i]}}</span>
                          </div>
                        </a>
                      </ng-container>
                      <ng-container *ngIf="notif.type=='group_exit'">

                        <a (click)="open_my_account();" [routerLink]="get_my_account()">
                          <div class="left-container">
                            <img [src]="list_of_notifications_profile_pictures[i]" (load)="load_notification_pp(i)"
                              [ngClass]="{'invisible':!notification_loaded[i]}">
                            <div class="notification-icon group">
                              <mat-icon>group</mat-icon>
                            </div>
                          </div>
                          <div class="right-container">
                            <span><b>{{notif.id_user_name}}</b> a quitté le groupe <b>"{{notif.publication_name}}"</b>
                            </span>
                            <span class="notification-date">{{list_of_notifications_dates[i]}}</span>
                          </div>
                        </a>
                      </ng-container>
                      <ng-container *ngIf="notif.type=='group_abort'">

                        <a (click)="open_my_account();" [routerLink]="get_my_account()">
                          <div class="left-container">
                            <img [src]="list_of_notifications_profile_pictures[i]" (load)="load_notification_pp(i)"
                              [ngClass]="{'invisible':!notification_loaded[i]}">
                            <div class="notification-icon group">
                              <mat-icon>group</mat-icon>
                            </div>
                          </div>
                          <div class="right-container">
                            <span *ngIf="notif.information!='abort_and_admin'"><b>{{notif.id_user_name}}</b> a refusé et
                              mis fin au du groupe <b>"{{notif.publication_name}}"</b> </span>
                            <span *ngIf="notif.information=='abort_and_admin'"><b>{{notif.id_user_name}}</b> a mis fin
                              au groupe <b>"{{notif.publication_name}}"</b> </span>
                            <span class="notification-date">{{list_of_notifications_dates[i]}}</span>
                          </div>
                        </a>
                      </ng-container>
                      <!-- ---------------------------Publication add----------------------------------->
                      <!-- ---------------------------Publication add----------------------------------->
                      <ng-container *ngIf="notif.type=='add_publication'">

                        <ng-container *ngIf="notif.publication_category=='comic'">
                          <a (click)="open_comic(notif);" [routerLink]="get_comic(notif)">
                            <div class="left-container">
                              <img [src]="list_of_notifications_profile_pictures[i]" (load)="load_notification_pp(i)"
                                [ngClass]="{'invisible':!notification_loaded[i]}">
                              <div class="notification-icon publication">
                                <mat-icon>save_alt</mat-icon>
                              </div>
                            </div>
                            <div class="right-container">
                              <span><b>{{notif.id_user_name}}</b> a publiée une bande dessinée :
                                <b>"{{notif.publication_name}}"</b></span>
                              <span class="notification-date">{{list_of_notifications_dates[i]}}</span>
                            </div>
                          </a>
                        </ng-container>

                        <ng-container *ngIf="notif.publication_category=='drawing'">
                          <ng-container *ngIf="notif.format=='one-shot'">
                            <a (click)="open_drawing(notif);" [routerLink]="get_drawing(notif)">
                              <div class="left-container">
                                <img [src]="list_of_notifications_profile_pictures[i]" (load)="load_notification_pp(i)"
                                  [ngClass]="{'invisible':!notification_loaded[i]}">
                                <div class="notification-icon publication">
                                  <mat-icon>save_alt</mat-icon>
                                </div>
                              </div>
                              <div class="right-container">
                                <span><b>{{notif.id_user_name}}</b> a publié un artbook :
                                  <b>"{{notif.publication_name}}"</b></span>
                                <span class="notification-date">{{list_of_notifications_dates[i]}}</span>
                              </div>
                            </a>
                          </ng-container>
                          <ng-container *ngIf="notif.format!='one-shot'">
                            <a (click)="open_drawing(notif);" [routerLink]="get_drawing(notif)">
                              <div class="left-container">
                                <img [src]="list_of_notifications_profile_pictures[i]" (load)="load_notification_pp(i)"
                                  [ngClass]="{'invisible':!notification_loaded[i]}">
                                <div class="notification-icon publication">
                                  <mat-icon>save_alt</mat-icon>
                                </div>
                              </div>
                              <div class="right-container">
                                <span><b>{{notif.id_user_name}}</b> a publié un artbook :
                                  <b>"{{notif.publication_name}}"</b></span>
                                <span class="notification-date">{{list_of_notifications_dates[i]}}</span>
                              </div>
                            </a>
                          </ng-container>
                        </ng-container>

                        <ng-container *ngIf="notif.publication_category=='writing'">
                          <a (click)="open_writing(notif);" [routerLink]="get_writing(notif)">
                            <div class="left-container">
                              <img [src]="list_of_notifications_profile_pictures[i]" (load)="load_notification_pp(i)"
                                [ngClass]="{'invisible':!notification_loaded[i]}">
                              <div class="notification-icon publication">
                                <mat-icon>save_alt</mat-icon>
                              </div>
                            </div>
                            <div class="right-container">
                              <span><b>{{notif.id_user_name}}</b> a publié un écrit :
                                <b>"{{notif.publication_name}}"</b></span>
                              <span class="notification-date">{{list_of_notifications_dates[i]}}</span>
                            </div>
                          </a>
                        </ng-container>

                        <ng-container *ngIf="notif.publication_category=='ad'">
                          <a (click)="open_ad(notif);" [routerLink]="get_ad(notif)">
                            <div class="left-container">
                              <img [src]="list_of_notifications_profile_pictures[i]" (load)="load_notification_pp(i)"
                                [ngClass]="{'invisible':!notification_loaded[i]}">
                              <div class="notification-icon publication">
                                <mat-icon>save_alt</mat-icon>
                              </div>
                            </div>
                            <div class="right-container">
                              <span><b>{{notif.id_user_name}}</b> a publié une annonce :
                                <b>"{{notif.publication_name}}"</b></span>
                              <span class="notification-date">{{list_of_notifications_dates[i]}}</span>
                            </div>
                          </a>
                        </ng-container>
                      </ng-container>

                      <!-- ---------------------------extend publication----------------------------------->
                      <!-- ---------------------------extend publication----------------------------------->

                      <ng-container *ngIf="notif.type=='extend_publication'">
                        <ng-container *ngIf="notif.publication_category=='comic'">
                          <a (click)="open_comic(notif);" [routerLink]="get_comic(notif)">
                            <div class="left-container">
                              <img [src]="list_of_notifications_profile_pictures[i]" (load)="load_notification_pp(i)"
                                [ngClass]="{'invisible':!notification_loaded[i]}">
                              <div class="notification-icon publication">
                                <mat-icon>save_alt</mat-icon>
                              </div>
                            </div>
                            <div class="right-container">
                              <span><b>{{notif.id_user_name}}</b> a ajouté un chapitre à l'œuvre :
                                <b>"{{notif.publication_name}}"</b></span>
                              <span class="notification-date">{{list_of_notifications_dates[i]}}</span>
                            </div>
                          </a>
                        </ng-container>
                      </ng-container>

                      <!-- ---------------------------Publciation like----------------------------------->
                      <!-- ---------------------------Publciation like----------------------------------->

                      <ng-container *ngIf="notif.type=='publication_like'">
                        <ng-container *ngIf="notif.publication_category=='comic'">

                          <ng-container *ngIf="notif.format=='serie'">
                            <a (click)="open_comic_chapter(notif);" [routerLink]="get_comic_chapter(notif)">
                              <div class="left-container">
                                <img [src]="list_of_notifications_profile_pictures[i]" (load)="load_notification_pp(i)"
                                  [ngClass]="{'invisible':!notification_loaded[i]}">
                                <div class="notification-icon like">
                                  <mat-icon>thumb_up</mat-icon>
                                </div>
                              </div>
                              <div class="right-container">
                                <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==1">
                                  <span><b>{{notif.id_user_name}}</b> et
                                    <b>{{dictionnary_of_similar_notifications[i][0].id_user_name}}</b> ont aimé votre
                                    œuvre : <b>"{{notif.publication_name}}"</b>, chapitre
                                    {{notif.chapter_number+1}}</span>
                                </ng-container>
                                <ng-container
                                  *ngIf="dictionnary_of_similar_notifications[i].length>1 && 4>dictionnary_of_similar_notifications[i].length">
                                  <span><b>{{notif.id_user_name}}</b>
                                    <ng-container
                                      *ngFor="let item of dictionnary_of_similar_notifications[i];let j=index">
                                      <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>j+1">,
                                        <b>{{item.id_user_name}}</b> </ng-container>
                                      <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==j+1">et
                                        <b>{{item.id_user_name}}</b> ont aimé votre œuvre :
                                        <b>"{{notif.publication_name}}"</b>, chapitre {{notif.chapter_number+1}}
                                      </ng-container>
                                    </ng-container>
                                  </span>
                                </ng-container>
                                <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>3 ">
                                  <span><b>{{notif.id_user_name}}</b>
                                    <ng-container
                                      *ngFor="let item of dictionnary_of_similar_notifications[i].slice(0,3);let j=index">
                                      <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>j+1">,
                                        <b>{{item.id_user_name}}</b> </ng-container>
                                      <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==j+1">,
                                        <b>{{item.id_user_name}}</b> &nbsp; et
                                        {{dictionnary_of_similar_notifications[i].length-3}} autres utilisateurs ont
                                        aimé votre œuvre : <b>"{{notif.publication_name}}"</b>, chapitre
                                        {{notif.chapter_number+1}}</ng-container>
                                    </ng-container>
                                  </span>
                                </ng-container>
                                <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==0">
                                  <span><b>{{notif.id_user_name}}</b> a aimé votre œuvre :
                                    <b>"{{notif.publication_name}}"</b>, chapitre {{notif.chapter_number+1}}</span>
                                </ng-container>
                                <span class="notification-date">{{list_of_notifications_dates[i]}}</span>
                              </div>
                            </a>
                          </ng-container>
                          <ng-container *ngIf="notif.format!='serie'">
                            <a (click)="open_comic(notif);" [routerLink]="get_comic(notif)">
                              <div class="left-container">
                                <img [src]="list_of_notifications_profile_pictures[i]" (load)="load_notification_pp(i)"
                                  [ngClass]="{'invisible':!notification_loaded[i]}">
                                <div class="notification-icon like">
                                  <mat-icon>thumb_up</mat-icon>
                                </div>
                              </div>
                              <div class="right-container">
                                <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==1">
                                  <span><b>{{notif.id_user_name}}</b> et
                                    <b>{{dictionnary_of_similar_notifications[i][0].id_user_name}}</b> ont aimé votre
                                    œuvre : <b>"{{notif.publication_name}}"</b>, chapitre
                                    {{notif.chapter_number+1}}</span>
                                </ng-container>
                                <ng-container
                                  *ngIf="dictionnary_of_similar_notifications[i].length>1 && 4>dictionnary_of_similar_notifications[i].length">
                                  <span><b>{{notif.id_user_name}}</b>
                                    <ng-container
                                      *ngFor="let item of dictionnary_of_similar_notifications[i];let j=index">
                                      <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>j+1">,
                                        <b>{{item.id_user_name}}</b> </ng-container>
                                      <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==j+1">et
                                        <b>{{item.id_user_name}}</b> ont aimé votre œuvre :
                                        <b>"{{notif.publication_name}}"</b>, chapitre {{notif.chapter_number+1}}
                                      </ng-container>
                                    </ng-container>
                                  </span>
                                </ng-container>
                                <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>3 ">
                                  <span><b>{{notif.id_user_name}}</b>
                                    <ng-container
                                      *ngFor="let item of dictionnary_of_similar_notifications[i].slice(0,3);let j=index">
                                      <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>j+1">,
                                        <b>{{item.id_user_name}}</b> </ng-container>
                                      <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==j+1">,
                                        <b>{{item.id_user_name}}</b> &nbsp; et
                                        {{dictionnary_of_similar_notifications[i].length-3}} autres utilisateurs ont
                                        aimé votre œuvre : <b>"{{notif.publication_name}}"</b>, chapitre
                                        {{notif.chapter_number+1}}</ng-container>
                                    </ng-container>
                                  </span>
                                </ng-container>
                                <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==0">
                                  <span><b>{{notif.id_user_name}}</b> a aimé votre œuvre :
                                    <b>"{{notif.publication_name}}"</b>, chapitre {{notif.chapter_number+1}}</span>
                                </ng-container>
                                <span class="notification-date">{{list_of_notifications_dates[i]}}</span>
                              </div>
                            </a>
                          </ng-container>
                        </ng-container>

                        <ng-container *ngIf="notif.publication_category=='drawing'">
                          <a (click)="open_drawing(notif);" [routerLink]="get_drawing(notif)">
                            <div class="left-container">
                              <img [src]="list_of_notifications_profile_pictures[i]" (load)="load_notification_pp(i)"
                                [ngClass]="{'invisible':!notification_loaded[i]}">
                              <div class="notification-icon like">
                                <mat-icon>thumb_up</mat-icon>
                              </div>
                            </div>
                            <div class="right-container">
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==1">
                                <span><b>{{notif.id_user_name}}</b> et
                                  <b>{{dictionnary_of_similar_notifications[i][0].id_user_name}}</b> ont aimé votre
                                  œuvre : <b>"{{notif.publication_name}}"</b></span>
                              </ng-container>
                              <ng-container
                                *ngIf="dictionnary_of_similar_notifications[i].length>1 && 4>dictionnary_of_similar_notifications[i].length">
                                <span><b>{{notif.id_user_name}}</b>
                                  <ng-container
                                    *ngFor="let item of dictionnary_of_similar_notifications[i];let j=index">
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>j+1">,
                                      <b>{{item.id_user_name}}</b> </ng-container>
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==j+1">et
                                      <b>{{item.id_user_name}}</b> ont aimé votre œuvre :
                                      <b>"{{notif.publication_name}}"</b></ng-container>
                                  </ng-container>
                                </span>
                              </ng-container>
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>3 ">
                                <span><b>{{notif.id_user_name}}</b>
                                  <ng-container
                                    *ngFor="let item of dictionnary_of_similar_notifications[i].slice(0,3);let j=index">
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>j+1">,
                                      <b>{{item.id_user_name}}</b> </ng-container>
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==j+1">,
                                      <b>{{item.id_user_name}}</b> &nbsp; et
                                      {{dictionnary_of_similar_notifications[i].length-3}} autres utilisateurs ont aimé
                                      votre œuvre : <b>"{{notif.publication_name}}"</b></ng-container>
                                  </ng-container>
                                </span>
                              </ng-container>
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==0">
                                <span><b>{{notif.id_user_name}}</b> a aimé votre œuvre :
                                  <b>"{{notif.publication_name}}"</b></span>
                              </ng-container>
                              <span class="notification-date">{{list_of_notifications_dates[i]}}</span>
                            </div>
                          </a>
                        </ng-container>

                        <ng-container *ngIf="notif.publication_category=='writing'">
                          <a (click)="open_writing(notif);" [routerLink]="get_writing(notif)">
                            <div class="left-container">
                              <img [src]="list_of_notifications_profile_pictures[i]" (load)="load_notification_pp(i)"
                                [ngClass]="{'invisible':!notification_loaded[i]}">
                              <div class="notification-icon like">
                                <mat-icon>thumb_up</mat-icon>
                              </div>
                            </div>
                            <div class="right-container">
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==1">
                                <span><b>{{notif.id_user_name}}</b> et
                                  <b>{{dictionnary_of_similar_notifications[i][0].id_user_name}}</b> ont aimé votre
                                  œuvre : <b>"{{notif.publication_name}}"</b></span>
                              </ng-container>
                              <ng-container
                                *ngIf="dictionnary_of_similar_notifications[i].length>1 && 4>dictionnary_of_similar_notifications[i].length">
                                <span><b>{{notif.id_user_name}}</b>
                                  <ng-container
                                    *ngFor="let item of dictionnary_of_similar_notifications[i];let j=index">
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>j+1">,
                                      <b>{{item.id_user_name}}</b> </ng-container>
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==j+1">et
                                      <b>{{item.id_user_name}}</b> ont aimé votre œuvre :
                                      <b>"{{notif.publication_name}}"</b></ng-container>
                                  </ng-container>
                                </span>
                              </ng-container>
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>3 ">
                                <span><b>{{notif.id_user_name}}</b>
                                  <ng-container
                                    *ngFor="let item of dictionnary_of_similar_notifications[i].slice(0,3);let j=index">
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>j+1">,
                                      <b>{{item.id_user_name}}</b> </ng-container>
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==j+1">,
                                      <b>{{item.id_user_name}}</b> &nbsp; et
                                      {{dictionnary_of_similar_notifications[i].length-3}} autres utilisateurs ont aimé
                                      votre œuvre : <b>"{{notif.publication_name}}"</b></ng-container>
                                  </ng-container>
                                </span>
                              </ng-container>
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==0">
                                <span><b>{{notif.id_user_name}}</b> a aimé votre œuvre :
                                  <b>"{{notif.publication_name}}"</b></span>
                              </ng-container>
                              <span class="notification-date">{{list_of_notifications_dates[i]}}</span>
                            </div>
                          </a>
                        </ng-container>
                      </ng-container>

                      <!-- ---------------------------Publciation love----------------------------------->
                      <!-- ---------------------------Publciation love----------------------------------->

                      <ng-container *ngIf="notif.type=='publication_love'">
                        <ng-container *ngIf="notif.publication_category=='comic'">

                          <a *ngIf="notif.format=='serie'" (click)="open_comic_chapter(notif);" [routerLink]="get_comic_chapter(notif)">
                            <div class="left-container">
                              <img [src]="list_of_notifications_profile_pictures[i]" (load)="load_notification_pp(i)"
                                [ngClass]="{'invisible':!notification_loaded[i]}">
                              <div class="notification-icon favorite">
                                <mat-icon>favorite</mat-icon>
                              </div>
                            </div>
                            <div class="right-container">
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==1">
                                <span><b>{{notif.id_user_name}}</b> et
                                  <b>{{dictionnary_of_similar_notifications[i][0].id_user_name}}</b> ont adoré votre
                                  œuvre : <b>"{{notif.publication_name}}"</b>, chapitre
                                  {{notif.chapter_number+1}}</span>
                              </ng-container>
                              <ng-container
                                *ngIf="dictionnary_of_similar_notifications[i].length>1 && 4>dictionnary_of_similar_notifications[i].length">
                                <span><b>{{notif.id_user_name}}</b>
                                  <ng-container
                                    *ngFor="let item of dictionnary_of_similar_notifications[i];let j=index">
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>j+1">,
                                      <b>{{item.id_user_name}}</b> </ng-container>
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==j+1">et
                                      <b>{{item.id_user_name}}</b> ont adoré votre œuvre :
                                      <b>"{{notif.publication_name}}"</b>, chapitre {{notif.chapter_number+1}}
                                    </ng-container>
                                  </ng-container>
                                </span>
                              </ng-container>
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>3 ">
                                <span><b>{{notif.id_user_name}}</b>
                                  <ng-container
                                    *ngFor="let item of dictionnary_of_similar_notifications[i].slice(0,3);let j=index">
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>j+1">,
                                      <b>{{item.id_user_name}}</b> </ng-container>
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==j+1">,
                                      <b>{{item.id_user_name}}</b> &nbsp; et
                                      {{dictionnary_of_similar_notifications[i].length-3}} autres utilisateurs ont adoré
                                      votre œuvre : <b>"{{notif.publication_name}}"</b>, chapitre
                                      {{notif.chapter_number+1}}</ng-container>
                                  </ng-container>
                                </span>
                              </ng-container>
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==0">
                                <span><b>{{notif.id_user_name}}</b> a adoré votre œuvre :
                                  <b>"{{notif.publication_name}}", chapitre {{notif.chapter_number+1}}</b></span>
                              </ng-container>
                              <span class="notification-date">{{list_of_notifications_dates[i]}}</span>
                            </div>
                          </a>
                          <a *ngIf="notif.format!='serie'" (click)="open_comic(notif);" [routerLink]="get_comic(notif)">
                            <div class="left-container">
                              <img [src]="list_of_notifications_profile_pictures[i]" (load)="load_notification_pp(i)"
                                [ngClass]="{'invisible':!notification_loaded[i]}">
                              <div class="notification-icon favorite">
                                <mat-icon>favorite</mat-icon>
                              </div>
                            </div>
                            <div class="right-container">
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==1">
                                <span><b>{{notif.id_user_name}}</b> et
                                  <b>{{dictionnary_of_similar_notifications[i][0].id_user_name}}</b> ont adoré votre
                                  œuvre : <b>"{{notif.publication_name}}"</b></span>
                              </ng-container>
                              <ng-container
                                *ngIf="dictionnary_of_similar_notifications[i].length>1 && 4>dictionnary_of_similar_notifications[i].length">
                                <span><b>{{notif.id_user_name}}</b>
                                  <ng-container
                                    *ngFor="let item of dictionnary_of_similar_notifications[i];let j=index">
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>j+1">,
                                      <b>{{item.id_user_name}}</b> </ng-container>
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==j+1">et
                                      <b>{{item.id_user_name}}</b> ont adoré votre œuvre :
                                      <b>"{{notif.publication_name}}"</b></ng-container>
                                  </ng-container>
                                </span>
                              </ng-container>
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>3 ">
                                <span><b>{{notif.id_user_name}}</b>
                                  <ng-container
                                    *ngFor="let item of dictionnary_of_similar_notifications[i].slice(0,3);let j=index">
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>j+1">,
                                      <b>{{item.id_user_name}}</b> </ng-container>
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==j+1">,
                                      <b>{{item.id_user_name}}</b> &nbsp; et
                                      {{dictionnary_of_similar_notifications[i].length-3}} autres utilisateurs ont adoré
                                      votre œuvre : <b>"{{notif.publication_name}}"</b></ng-container>
                                  </ng-container>
                                </span>
                              </ng-container>
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==0">
                                <span><b>{{notif.id_user_name}}</b> a adoré votre œuvre :
                                  <b>"{{notif.publication_name}}"</b></span>
                              </ng-container>
                              <span class="notification-date">{{list_of_notifications_dates[i]}}</span>
                            </div>
                          </a>
                        </ng-container>

                        <ng-container *ngIf="notif.publication_category=='drawing'">
                          <a (click)="open_drawing(notif);" [routerLink]="get_drawing(notif)">
                            <div class="left-container">
                              <img [src]="list_of_notifications_profile_pictures[i]" (load)="load_notification_pp(i)"
                                [ngClass]="{'invisible':!notification_loaded[i]}">
                              <div class="notification-icon favorite">
                                <mat-icon>favorite</mat-icon>
                              </div>
                            </div>
                            <div class="right-container">
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==1">
                                <span><b>{{notif.id_user_name}}</b> et
                                  <b>{{dictionnary_of_similar_notifications[i][0].id_user_name}}</b> ont adoré votre
                                  œuvre : <b>"{{notif.publication_name}}"</b></span>
                              </ng-container>
                              <ng-container
                                *ngIf="dictionnary_of_similar_notifications[i].length>1 && 4>dictionnary_of_similar_notifications[i].length">
                                <span><b>{{notif.id_user_name}}</b>
                                  <ng-container
                                    *ngFor="let item of dictionnary_of_similar_notifications[i];let j=index">
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>j+1">,
                                      <b>{{item.id_user_name}}</b> </ng-container>
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==j+1">et
                                      <b>{{item.id_user_name}}</b> ont adoré votre œuvre :
                                      <b>"{{notif.publication_name}}"</b></ng-container>
                                  </ng-container>
                                </span>
                              </ng-container>
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>3 ">
                                <span><b>{{notif.id_user_name}}</b>
                                  <ng-container
                                    *ngFor="let item of dictionnary_of_similar_notifications[i].slice(0,3);let j=index">
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>j+1">,
                                      <b>{{item.id_user_name}}</b> </ng-container>
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==j+1">,
                                      <b>{{item.id_user_name}}</b> &nbsp; et
                                      {{dictionnary_of_similar_notifications[i].length-3}} autres utilisateurs ont adoré
                                      votre œuvre : <b>"{{notif.publication_name}}"</b></ng-container>
                                  </ng-container>
                                </span>
                              </ng-container>
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==0">
                                <span><b>{{notif.id_user_name}}</b> a adoré votre œuvre :
                                  <b>"{{notif.publication_name}}"</b></span>
                              </ng-container>
                              <span class="notification-date">{{list_of_notifications_dates[i]}}</span>
                            </div>
                          </a>
                        </ng-container>

                        <ng-container *ngIf="notif.publication_category=='writing'">
                          <a (click)="open_writing(notif);" [routerLink]="get_writing(notif)">
                            <div class="left-container">
                              <img [src]="list_of_notifications_profile_pictures[i]" (load)="load_notification_pp(i)"
                                [ngClass]="{'invisible':!notification_loaded[i]}">
                              <div class="notification-icon favorite">
                                <mat-icon>favorite</mat-icon>
                              </div>
                            </div>
                            <div class="right-container">
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==1">
                                <span><b>{{notif.id_user_name}}</b> et
                                  <b>{{dictionnary_of_similar_notifications[i][0].id_user_name}}</b> ont adoré votre
                                  œuvre : <b>"{{notif.publication_name}}"</b></span>
                              </ng-container>
                              <ng-container
                                *ngIf="dictionnary_of_similar_notifications[i].length>1 && 4>dictionnary_of_similar_notifications[i].length">
                                <span><b>{{notif.id_user_name}}</b>
                                  <ng-container
                                    *ngFor="let item of dictionnary_of_similar_notifications[i];let j=index">
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>j+1">,
                                      <b>{{item.id_user_name}}</b> </ng-container>
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==j+1">et
                                      <b>{{item.id_user_name}}</b> ont adoré votre œuvre :
                                      <b>"{{notif.publication_name}}"</b></ng-container>
                                  </ng-container>
                                </span>
                              </ng-container>
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>3 ">
                                <span><b>{{notif.id_user_name}}</b>
                                  <ng-container
                                    *ngFor="let item of dictionnary_of_similar_notifications[i].slice(0,3);let j=index">
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>j+1">,
                                      <b>{{item.id_user_name}}</b> </ng-container>
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==j+1">,
                                      <b>{{item.id_user_name}}</b> &nbsp; et
                                      {{dictionnary_of_similar_notifications[i].length-3}} autres utilisateurs ont adoré
                                      votre œuvre : <b>"{{notif.publication_name}}"</b></ng-container>
                                  </ng-container>
                                </span>
                              </ng-container>
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==0">
                                <span><b>{{notif.id_user_name}}</b> a adoré votre œuvre :
                                  <b>"{{notif.publication_name}}"</b></span>
                              </ng-container>
                              <span class="notification-date">{{list_of_notifications_dates[i]}}</span>
                            </div>
                          </a>
                        </ng-container>
                      </ng-container>

                      <!-- ---------------------------Comment----------------------------------->
                      <!-- ---------------------------Comment----------------------------------->

                      <ng-container *ngIf="notif.type=='comment'">
                        <ng-container *ngIf="notif.publication_category=='comic'">

                          <a *ngIf="notif.format=='serie'" (click)="open_comic_chapter(notif);" [routerLink]="get_comic_chapter(notif)">
                            <div class="left-container">
                              <img [src]="list_of_notifications_profile_pictures[i]" (load)="load_notification_pp(i)"
                                [ngClass]="{'invisible':!notification_loaded[i]}">
                              <div class="notification-icon comment">
                                <mat-icon>mode_comment</mat-icon>
                              </div>
                            </div>
                            <div class="right-container">
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==1">
                                <span><b>{{notif.id_user_name}}</b> et
                                  <b>{{dictionnary_of_similar_notifications[i][0].id_user_name}}</b> ont commenté votre
                                  œuvre : <b>"{{notif.publication_name}}"</b>, chapitre
                                  {{notif.chapter_number+1}}</span>
                              </ng-container>
                              <ng-container
                                *ngIf="dictionnary_of_similar_notifications[i].length>1 && 4>dictionnary_of_similar_notifications[i].length">
                                <span><b>{{notif.id_user_name}}</b>
                                  <ng-container
                                    *ngFor="let item of dictionnary_of_similar_notifications[i];let j=index">
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>j+1">,
                                      <b>{{item.id_user_name}}</b> </ng-container>
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==j+1">et
                                      <b>{{item.id_user_name}}</b> ont commenté votre œuvre :
                                      <b>"{{notif.publication_name}}"</b>, chapitre {{notif.chapter_number+1}}
                                    </ng-container>
                                  </ng-container>
                                </span>
                              </ng-container>
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>3 ">
                                <span><b>{{notif.id_user_name}}</b>
                                  <ng-container
                                    *ngFor="let item of dictionnary_of_similar_notifications[i].slice(0,3);let j=index">
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>j+1">,
                                      <b>{{item.id_user_name}}</b> </ng-container>
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==j+1">,
                                      <b>{{item.id_user_name}}</b> &nbsp; et
                                      {{dictionnary_of_similar_notifications[i].length-3}} autres utilisateurs ont
                                      commenté votre œuvre : <b>"{{notif.publication_name}}"</b>, chapitre
                                      {{notif.chapter_number+1}}</ng-container>
                                  </ng-container>
                                </span>
                              </ng-container>
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==0">
                                <span><b>{{notif.id_user_name}}</b> a commenté votre œuvre :
                                  <b>"{{notif.publication_name}}"</b>, chapitre {{notif.chapter_number+1}}</span>
                              </ng-container>
                              <span class="notification-date">{{list_of_notifications_dates[i]}}</span>
                            </div>
                          </a>

                          <a *ngIf="notif.format!='serie'" (click)="open_comic(notif);" [routerLink]="get_comic(notif)">
                            <div class="left-container">
                              <img [src]="list_of_notifications_profile_pictures[i]" (load)="load_notification_pp(i)"
                                [ngClass]="{'invisible':!notification_loaded[i]}">
                              <div class="notification-icon comment">
                                <mat-icon>mode_comment</mat-icon>
                              </div>
                            </div>
                            <div class="right-container">
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==1">
                                <span><b>{{notif.id_user_name}}</b> et
                                  <b>{{dictionnary_of_similar_notifications[i][0].id_user_name}}</b> ont commenté votre
                                  œuvre : <b>"{{notif.publication_name}}"</b></span>
                              </ng-container>
                              <ng-container
                                *ngIf="dictionnary_of_similar_notifications[i].length>1 && 4>dictionnary_of_similar_notifications[i].length">
                                <span><b>{{notif.id_user_name}}</b>
                                  <ng-container
                                    *ngFor="let item of dictionnary_of_similar_notifications[i];let j=index">
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>j+1">,
                                      <b>{{item.id_user_name}}</b> </ng-container>
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==j+1">et
                                      <b>{{item.id_user_name}}</b> ont commenté votre œuvre :
                                      <b>"{{notif.publication_name}}"</b></ng-container>
                                  </ng-container>
                                </span>
                              </ng-container>
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>3 ">
                                <span><b>{{notif.id_user_name}}</b>
                                  <ng-container
                                    *ngFor="let item of dictionnary_of_similar_notifications[i].slice(0,3);let j=index">
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>j+1">,
                                      <b>{{item.id_user_name}}</b> </ng-container>
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==j+1">,
                                      <b>{{item.id_user_name}}</b> &nbsp; et
                                      {{dictionnary_of_similar_notifications[i].length-3}} autres utilisateurs ont
                                      commenté votre œuvre : <b>"{{notif.publication_name}}"</b></ng-container>
                                  </ng-container>
                                </span>
                              </ng-container>
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==0">
                                <span><b>{{notif.id_user_name}}</b> a commenté votre œuvre :
                                  <b>"{{notif.publication_name}}"</b></span>
                              </ng-container>
                              <span class="notification-date">{{list_of_notifications_dates[i]}}</span>
                            </div>
                          </a>
                        </ng-container>

                        <ng-container *ngIf="notif.publication_category=='drawing'">
                          <a (click)="open_drawing(notif);" [routerLink]="get_drawing(notif)">
                            <div class="left-container">
                              <img [src]="list_of_notifications_profile_pictures[i]" (load)="load_notification_pp(i)"
                                [ngClass]="{'invisible':!notification_loaded[i]}">
                              <div class="notification-icon comment">
                                <mat-icon>mode_comment</mat-icon>
                              </div>
                            </div>
                            <div class="right-container">
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==1">
                                <span><b>{{notif.id_user_name}}</b> et
                                  <b>{{dictionnary_of_similar_notifications[i][0].id_user_name}}</b> ont commenté votre
                                  œuvre : <b>"{{notif.publication_name}}"</b></span>
                              </ng-container>
                              <ng-container
                                *ngIf="dictionnary_of_similar_notifications[i].length>1 && 4>dictionnary_of_similar_notifications[i].length">
                                <span><b>{{notif.id_user_name}}</b>
                                  <ng-container
                                    *ngFor="let item of dictionnary_of_similar_notifications[i];let j=index">
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>j+1">,
                                      <b>{{item.id_user_name}}</b> </ng-container>
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==j+1">et
                                      <b>{{item.id_user_name}}</b> ont commenté votre œuvre :
                                      <b>"{{notif.publication_name}}"</b></ng-container>
                                  </ng-container>
                                </span>
                              </ng-container>
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>3 ">
                                <span><b>{{notif.id_user_name}}</b>
                                  <ng-container
                                    *ngFor="let item of dictionnary_of_similar_notifications[i].slice(0,3);let j=index">
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>j+1">,
                                      <b>{{item.id_user_name}}</b> </ng-container>
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==j+1">,
                                      <b>{{item.id_user_name}}</b> &nbsp; et
                                      {{dictionnary_of_similar_notifications[i].length-3}} autres utilisateurs ont
                                      commenté votre œuvre : <b>"{{notif.publication_name}}"</b></ng-container>
                                  </ng-container>
                                </span>
                              </ng-container>
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==0">
                                <span><b>{{notif.id_user_name}}</b> a commenté votre œuvre :
                                  <b>"{{notif.publication_name}}"</b></span>
                              </ng-container>
                              <span class="notification-date">{{list_of_notifications_dates[i]}}</span>
                            </div>
                          </a>
                        </ng-container>

                        <ng-container *ngIf="notif.publication_category=='writing'">
                          <a (click)="open_writing(notif);" [routerLink]="get_writing(notif)">
                            <div class="left-container">
                              <img [src]="list_of_notifications_profile_pictures[i]" (load)="load_notification_pp(i)"
                                [ngClass]="{'invisible':!notification_loaded[i]}">
                              <div class="notification-icon comment">
                                <mat-icon>mode_comment</mat-icon>
                              </div>
                            </div>
                            <div class="right-container">
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==1">
                                <span><b>{{notif.id_user_name}}</b> et
                                  <b>{{dictionnary_of_similar_notifications[i][0].id_user_name}}</b> ont commenté votre
                                  œuvre : <b>"{{notif.publication_name}}"</b></span>
                              </ng-container>
                              <ng-container
                                *ngIf="dictionnary_of_similar_notifications[i].length>1 && 4>dictionnary_of_similar_notifications[i].length">
                                <span><b>{{notif.id_user_name}}</b>
                                  <ng-container
                                    *ngFor="let item of dictionnary_of_similar_notifications[i];let j=index">
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>j+1">,
                                      <b>{{item.id_user_name}}</b> </ng-container>
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==j+1">et
                                      <b>{{item.id_user_name}}</b> ont commenté votre œuvre :
                                      <b>"{{notif.publication_name}}"</b></ng-container>
                                  </ng-container>
                                </span>
                              </ng-container>
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>3 ">
                                <span><b>{{notif.id_user_name}}</b>
                                  <ng-container
                                    *ngFor="let item of dictionnary_of_similar_notifications[i].slice(0,3);let j=index">
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>j+1">,
                                      <b>{{item.id_user_name}}</b> </ng-container>
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==j+1">,
                                      <b>{{item.id_user_name}}</b> &nbsp; et
                                      {{dictionnary_of_similar_notifications[i].length-3}} autres utilisateurs ont
                                      commenté votre œuvre : <b>"{{notif.publication_name}}"</b></ng-container>
                                  </ng-container>
                                </span>
                              </ng-container>
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==0">
                                <span><b>{{notif.id_user_name}}</b> a commenté votre œuvre :
                                  <b>"{{notif.publication_name}}"</b></span>
                              </ng-container>
                              <span class="notification-date">{{list_of_notifications_dates[i]}}</span>
                            </div>
                          </a>
                        </ng-container>

                        <ng-container *ngIf="notif.publication_category=='ad'">
                          <a (click)="open_ad(notif);" [routerLink]="get_ad(notif)">
                            <div class="left-container">
                              <img [src]="list_of_notifications_profile_pictures[i]" (load)="load_notification_pp(i)"
                                [ngClass]="{'invisible':!notification_loaded[i]}">
                              <div class="notification-icon comment">
                                <mat-icon>mode_comment</mat-icon>
                              </div>
                            </div>
                            <div class="right-container">
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==1">
                                <span><b>{{notif.id_user_name}}</b> et
                                  <b>{{dictionnary_of_similar_notifications[i][0].id_user_name}}</b> ont commenté votre
                                  annonce : <b>"{{notif.publication_name}}"</b></span>
                              </ng-container>
                              <ng-container
                                *ngIf="dictionnary_of_similar_notifications[i].length>1 && 4>dictionnary_of_similar_notifications[i].length">
                                <span><b>{{notif.id_user_name}}</b>
                                  <ng-container
                                    *ngFor="let item of dictionnary_of_similar_notifications[i];let j=index">
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>j+1">,
                                      <b>{{item.id_user_name}}</b> </ng-container>
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==j+1">et
                                      <b>{{item.id_user_name}}</b> ont commenté votre œuvre :
                                      <b>"{{notif.publication_name}}"</b></ng-container>
                                  </ng-container>
                                </span>
                              </ng-container>
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>3 ">
                                <span><b>{{notif.id_user_name}}</b>
                                  <ng-container
                                    *ngFor="let item of dictionnary_of_similar_notifications[i].slice(0,3);let j=index">
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>j+1">,
                                      <b>{{item.id_user_name}}</b> </ng-container>
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==j+1">,
                                      <b>{{item.id_user_name}}</b> &nbsp; et
                                      {{dictionnary_of_similar_notifications[i].length-3}} autres utilisateurs ont
                                      commenté votre œuvre : <b>"{{notif.publication_name}}"</b></ng-container>
                                  </ng-container>
                                </span>
                              </ng-container>
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==0">
                                <span><b>{{notif.id_user_name}}</b> a commenté votre annonce :
                                  <b>"{{notif.publication_name}}"</b></span>
                              </ng-container>
                              <span class="notification-date">{{list_of_notifications_dates[i]}}</span>
                            </div>
                          </a>
                        </ng-container>
                      </ng-container>

                      <!-- ---------------------------Comment answer----------------------------------->
                      <!-- ---------------------------Comment answer ----------------------------------->

                      <ng-container *ngIf="notif.type=='comment_answer'">
                        <ng-container *ngIf="notif.publication_category=='comic'">
                          <a *ngIf="notif.format=='serie'" (click)="open_comic_chapter(notif);" [routerLink]="get_comic_chapter(notif)">
                            <div class="left-container">
                              <img [src]="list_of_notifications_profile_pictures[i]" (load)="load_notification_pp(i)"
                                [ngClass]="{'invisible':!notification_loaded[i]}">
                              <div class="notification-icon comment">
                                <mat-icon>mode_comment</mat-icon>
                              </div>
                            </div>
                            <div class="right-container">
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==1">
                                <span><b>{{notif.id_user_name}}</b> et
                                  <b>{{dictionnary_of_similar_notifications[i][0].id_user_name}}</b> ont répondu à votre
                                  commentaire : {{notif.information}}</span>
                              </ng-container>
                              <ng-container
                                *ngIf="dictionnary_of_similar_notifications[i].length>1 && 4>dictionnary_of_similar_notifications[i].length">
                                <span><b>{{notif.id_user_name}}</b>
                                  <ng-container
                                    *ngFor="let item of dictionnary_of_similar_notifications[i];let j=index">
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>j+1">,
                                      <b>{{item.id_user_name}}</b> </ng-container>
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==j+1">et
                                      <b>{{item.id_user_name}}</b> ont répondu à votre commentaire :
                                      {{notif.information}}</ng-container>
                                  </ng-container>
                                </span>
                              </ng-container>
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>3 ">
                                <span><b>{{notif.id_user_name}}</b>
                                  <ng-container
                                    *ngFor="let item of dictionnary_of_similar_notifications[i].slice(0,3);let j=index">
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>j+1">,
                                      <b>{{item.id_user_name}}</b> </ng-container>
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==j+1">,
                                      <b>{{item.id_user_name}}</b> &nbsp; et
                                      {{dictionnary_of_similar_notifications[i].length-3}} autres utilisateurs ont
                                      répondu à votre commentaire : {{notif.information}}</ng-container>
                                  </ng-container>
                                </span>
                              </ng-container>
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==0">
                                <span><b>{{notif.id_user_name}}</b> a répondu à votre commentaire :
                                  {{notif.information}}</span>
                              </ng-container>
                              <span class="notification-date">{{list_of_notifications_dates[i]}}</span>
                            </div>
                          </a>
                          <a *ngIf="notif.format!='serie'" (click)="open_comic(notif);" [routerLink]="get_comic(notif)">
                            <div class="left-container">
                              <img [src]="list_of_notifications_profile_pictures[i]" (load)="load_notification_pp(i)"
                                [ngClass]="{'invisible':!notification_loaded[i]}">
                              <div class="notification-icon comment">
                                <mat-icon>mode_comment</mat-icon>
                              </div>
                            </div>
                            <div class="right-container">
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==1">
                                <span><b>{{notif.id_user_name}}</b> et
                                  <b>{{dictionnary_of_similar_notifications[i][0].id_user_name}}</b> ont répondu à votre
                                  commentaire : {{notif.information}}</span>
                              </ng-container>
                              <ng-container
                                *ngIf="dictionnary_of_similar_notifications[i].length>1 && 4>dictionnary_of_similar_notifications[i].length">
                                <span><b>{{notif.id_user_name}}</b>
                                  <ng-container
                                    *ngFor="let item of dictionnary_of_similar_notifications[i];let j=index">
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>j+1">,
                                      <b>{{item.id_user_name}}</b> </ng-container>
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==j+1">et
                                      <b>{{item.id_user_name}}</b> ont répondu à votre commentaire :
                                      {{notif.information}}</ng-container>
                                  </ng-container>
                                </span>
                              </ng-container>
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>3 ">
                                <span><b>{{notif.id_user_name}}</b>
                                  <ng-container
                                    *ngFor="let item of dictionnary_of_similar_notifications[i].slice(0,3);let j=index">
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>j+1">,
                                      <b>{{item.id_user_name}}</b> </ng-container>
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==j+1">,
                                      <b>{{item.id_user_name}}</b> &nbsp; et
                                      {{dictionnary_of_similar_notifications[i].length-3}} autres utilisateurs ont
                                      répondu à votre commentaire : {{notif.information}}</ng-container>
                                  </ng-container>
                                </span>
                              </ng-container>
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==0">
                                <span><b>{{notif.id_user_name}}</b> a répondu à votre commentaire :
                                  {{notif.information}}</span>
                              </ng-container>
                              <span class="notification-date">{{list_of_notifications_dates[i]}}</span>
                            </div>
                          </a>
                        </ng-container>

                        <ng-container *ngIf="notif.publication_category=='drawing'">
                          <a (click)="open_drawing(notif);" [routerLink]="get_drawing(notif)">
                            <div class="left-container">
                              <img [src]="list_of_notifications_profile_pictures[i]" (load)="load_notification_pp(i)"
                                [ngClass]="{'invisible':!notification_loaded[i]}">
                              <div class="notification-icon comment">
                                <mat-icon>mode_comment</mat-icon>
                              </div>
                            </div>
                            <div class="right-container">
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==1">
                                <span><b>{{notif.id_user_name}}</b> et
                                  <b>{{dictionnary_of_similar_notifications[i][0].id_user_name}}</b> ont répondu à votre
                                  commentaire : {{notif.information}}</span>
                              </ng-container>
                              <ng-container
                                *ngIf="dictionnary_of_similar_notifications[i].length>1 && 4>dictionnary_of_similar_notifications[i].length">
                                <span><b>{{notif.id_user_name}}</b>
                                  <ng-container
                                    *ngFor="let item of dictionnary_of_similar_notifications[i];let j=index">
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>j+1">,
                                      <b>{{item.id_user_name}}</b> </ng-container>
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==j+1">et
                                      <b>{{item.id_user_name}}</b> ont répondu à votre commentaire :
                                      {{notif.information}}</ng-container>
                                  </ng-container>
                                </span>
                              </ng-container>
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>3 ">
                                <span><b>{{notif.id_user_name}}</b>
                                  <ng-container
                                    *ngFor="let item of dictionnary_of_similar_notifications[i].slice(0,3);let j=index">
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>j+1">,
                                      <b>{{item.id_user_name}}</b> </ng-container>
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==j+1">,
                                      <b>{{item.id_user_name}}</b> &nbsp; et
                                      {{dictionnary_of_similar_notifications[i].length-3}} autres utilisateurs ont
                                      répondu à votre commentaire : {{notif.information}}</ng-container>
                                  </ng-container>
                                </span>
                              </ng-container>
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==0">
                                <span><b>{{notif.id_user_name}}</b> a répondu à votre commentaire :
                                  {{notif.information}}</span>
                              </ng-container>
                              <span class="notification-date">{{list_of_notifications_dates[i]}}</span>
                            </div>
                          </a>
                        </ng-container>

                        <ng-container *ngIf="notif.publication_category=='writing'">
                          <a (click)="open_writing(notif);" [routerLink]="get_writing(notif)">
                            <div class="left-container">
                              <img [src]="list_of_notifications_profile_pictures[i]" (load)="load_notification_pp(i)"
                                [ngClass]="{'invisible':!notification_loaded[i]}">
                              <div class="notification-icon comment">
                                <mat-icon>mode_comment</mat-icon>
                              </div>
                            </div>
                            <div class="right-container">
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==1">
                                <span><b>{{notif.id_user_name}}</b> et
                                  <b>{{dictionnary_of_similar_notifications[i][0].id_user_name}}</b> ont répondu à votre
                                  commentaire : {{notif.information}}</span>
                              </ng-container>
                              <ng-container
                                *ngIf="dictionnary_of_similar_notifications[i].length>1 && 4>dictionnary_of_similar_notifications[i].length">
                                <span><b>{{notif.id_user_name}}</b>
                                  <ng-container
                                    *ngFor="let item of dictionnary_of_similar_notifications[i];let j=index">
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>j+1">,
                                      <b>{{item.id_user_name}}</b> </ng-container>
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==j+1">et
                                      <b>{{item.id_user_name}}</b> ont répondu à votre commentaire :
                                      {{notif.information}}</ng-container>
                                  </ng-container>
                                </span>
                              </ng-container>
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>3 ">
                                <span><b>{{notif.id_user_name}}</b>
                                  <ng-container
                                    *ngFor="let item of dictionnary_of_similar_notifications[i].slice(0,3);let j=index">
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>j+1">,
                                      <b>{{item.id_user_name}}</b> </ng-container>
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==j+1">,
                                      <b>{{item.id_user_name}}</b> &nbsp; et
                                      {{dictionnary_of_similar_notifications[i].length-3}} autres utilisateurs ont
                                      répondu à votre commentaire : {{notif.information}}</ng-container>
                                  </ng-container>
                                </span>
                              </ng-container>
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==0">
                                <span><b>{{notif.id_user_name}}</b> a répondu à votre commentaire :
                                  {{notif.information}}</span>
                              </ng-container>
                              <span class="notification-date">{{list_of_notifications_dates[i]}}</span>
                            </div>
                          </a>
                        </ng-container>

                        <ng-container *ngIf="notif.publication_category=='ad'">
                          <a (click)="open_ad(notif);" [routerLink]="get_ad(notif)">
                            <div class="left-container">
                              <img [src]="list_of_notifications_profile_pictures[i]" (load)="load_notification_pp(i)"
                                [ngClass]="{'invisible':!notification_loaded[i]}">
                              <div class="notification-icon comment">
                                <mat-icon>mode_comment</mat-icon>
                              </div>
                            </div>
                            <div class="right-container">
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==1">
                                <span><b>{{notif.id_user_name}}</b> et
                                  <b>{{dictionnary_of_similar_notifications[i][0].id_user_name}}</b> ont répondu à votre
                                  commentaire : {{notif.information}}</span>
                              </ng-container>
                              <ng-container
                                *ngIf="dictionnary_of_similar_notifications[i].length>1 && 4>dictionnary_of_similar_notifications[i].length">
                                <span><b>{{notif.id_user_name}}</b>
                                  <ng-container
                                    *ngFor="let item of dictionnary_of_similar_notifications[i];let j=index">
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>j+1">,
                                      <b>{{item.id_user_name}}</b> </ng-container>
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==j+1">et
                                      <b>{{item.id_user_name}}</b> ont répondu à votre commentaire :
                                      {{notif.information}}</ng-container>
                                  </ng-container>
                                </span>
                              </ng-container>
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>3 ">
                                <span><b>{{notif.id_user_name}}</b>
                                  <ng-container
                                    *ngFor="let item of dictionnary_of_similar_notifications[i].slice(0,3);let j=index">
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>j+1">,
                                      <b>{{item.id_user_name}}</b> </ng-container>
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==j+1">,
                                      <b>{{item.id_user_name}}</b> &nbsp; et
                                      {{dictionnary_of_similar_notifications[i].length-3}} autres utilisateurs ont
                                      répondu à votre commentaire : {{notif.information}}</ng-container>
                                  </ng-container>
                                </span>
                              </ng-container>
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==0">
                                <span><b>{{notif.id_user_name}}</b> a répondu à votre commentaire :
                                  {{notif.information}}</span>
                              </ng-container>
                              <span class="notification-date">{{list_of_notifications_dates[i]}}</span>
                            </div>
                          </a>
                        </ng-container>
                      </ng-container>

                      <!-- ---------------------------Comment like and comment_answer like----------------------------------->
                      <!-- ----------------------------Comment like and comment_answer like ----------------------------------->

                      <ng-container *ngIf="notif.type=='comment_like' || notif.type=='comment_answer_like'">
                        <ng-container *ngIf="notif.publication_category=='comic'">
                          <a *ngIf="notif.format=='serie'" (click)="open_comic_chapter(notif);" [routerLink]="get_comic_chapter(notif)">
                            <div class="left-container">
                              <img [src]="list_of_notifications_profile_pictures[i]" (load)="load_notification_pp(i)"
                                [ngClass]="{'invisible':!notification_loaded[i]}">
                              <div class="notification-icon like">
                                <mat-icon>thumb_up</mat-icon>
                              </div>
                            </div>
                            <div class="right-container">
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==1">
                                <span><b>{{notif.id_user_name}}</b> et
                                  <b>{{dictionnary_of_similar_notifications[i][0].id_user_name}}</b> ont aimé votre
                                  commentaire : {{notif.information}}</span>
                              </ng-container>
                              <ng-container
                                *ngIf="dictionnary_of_similar_notifications[i].length>1 && 4>dictionnary_of_similar_notifications[i].length">
                                <span><b>{{notif.id_user_name}}</b>
                                  <ng-container
                                    *ngFor="let item of dictionnary_of_similar_notifications[i];let j=index">
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>j+1">,
                                      <b>{{item.id_user_name}}</b> </ng-container>
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==j+1">et
                                      <b>{{item.id_user_name}}</b> ont aimé votre commentaire : {{notif.information}}
                                    </ng-container>
                                  </ng-container>
                                </span>
                              </ng-container>
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>3 ">
                                <span><b>{{notif.id_user_name}}</b>
                                  <ng-container
                                    *ngFor="let item of dictionnary_of_similar_notifications[i].slice(0,3);let j=index">
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>j+1">,
                                      <b>{{item.id_user_name}}</b> </ng-container>
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==j+1">,
                                      <b>{{item.id_user_name}}</b> &nbsp; et
                                      {{dictionnary_of_similar_notifications[i].length-3}} autres utilisateurs ont aimé
                                      votre commentaire : {{notif.information}}</ng-container>
                                  </ng-container>
                                </span>
                              </ng-container>
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==0">
                                <span><b>{{notif.id_user_name}}</b> a aimé votre commentaire :
                                  {{notif.information}}</span>
                              </ng-container>
                              <span class="notification-date">{{list_of_notifications_dates[i]}}</span>
                            </div>
                          </a>
                          <a *ngIf="notif.format!='serie'" (click)="open_comic(notif);" [routerLink]="get_comic(notif)">
                            <div class="left-container">
                              <img [src]="list_of_notifications_profile_pictures[i]" (load)="load_notification_pp(i)"
                                [ngClass]="{'invisible':!notification_loaded[i]}">
                              <div class="notification-icon like">
                                <mat-icon>thumb_up</mat-icon>
                              </div>
                            </div>
                            <div class="right-container">
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==1">
                                <span><b>{{notif.id_user_name}}</b> et
                                  <b>{{dictionnary_of_similar_notifications[i][0].id_user_name}}</b> ont aimé votre
                                  commentaire : {{notif.information}}</span>
                              </ng-container>
                              <ng-container
                                *ngIf="dictionnary_of_similar_notifications[i].length>1 && 4>dictionnary_of_similar_notifications[i].length">
                                <span><b>{{notif.id_user_name}}</b>
                                  <ng-container
                                    *ngFor="let item of dictionnary_of_similar_notifications[i];let j=index">
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>j+1">,
                                      <b>{{item.id_user_name}}</b> </ng-container>
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==j+1">et
                                      <b>{{item.id_user_name}}</b> ont aimé votre commentaire : {{notif.information}}
                                    </ng-container>
                                  </ng-container>
                                </span>
                              </ng-container>
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>3 ">
                                <span><b>{{notif.id_user_name}}</b>
                                  <ng-container
                                    *ngFor="let item of dictionnary_of_similar_notifications[i].slice(0,3);let j=index">
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>j+1">,
                                      <b>{{item.id_user_name}}</b> </ng-container>
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==j+1">,
                                      <b>{{item.id_user_name}}</b> &nbsp; et
                                      {{dictionnary_of_similar_notifications[i].length-3}} autres utilisateurs ont aimé
                                      votre commentaire : {{notif.information}}</ng-container>
                                  </ng-container>
                                </span>
                              </ng-container>
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==0">
                                <span><b>{{notif.id_user_name}}</b> a aimé votre commentaire :
                                  {{notif.information}}</span>
                              </ng-container>
                              <span class="notification-date">{{list_of_notifications_dates[i]}}</span>
                            </div>
                          </a>
                        </ng-container>

                        <ng-container *ngIf="notif.publication_category=='drawing'">
                          <a (click)="open_drawing(notif);" [routerLink]="get_drawing(notif)">
                            <div class="left-container">
                              <img [src]="list_of_notifications_profile_pictures[i]" (load)="load_notification_pp(i)"
                                [ngClass]="{'invisible':!notification_loaded[i]}">
                              <div class="notification-icon like">
                                <mat-icon>thumb_up</mat-icon>
                              </div>
                            </div>
                            <div class="right-container">
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==1">
                                <span><b>{{notif.id_user_name}}</b> et
                                  <b>{{dictionnary_of_similar_notifications[i][0].id_user_name}}</b> ont aimé votre
                                  commentaire : {{notif.information}}</span>
                              </ng-container>
                              <ng-container
                                *ngIf="dictionnary_of_similar_notifications[i].length>1 && 4>dictionnary_of_similar_notifications[i].length">
                                <span><b>{{notif.id_user_name}}</b>
                                  <ng-container
                                    *ngFor="let item of dictionnary_of_similar_notifications[i];let j=index">
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>j+1">,
                                      <b>{{item.id_user_name}}</b> </ng-container>
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==j+1">et
                                      <b>{{item.id_user_name}}</b> ont aimé votre commentaire : {{notif.information}}
                                    </ng-container>
                                  </ng-container>
                                </span>
                              </ng-container>
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>3 ">
                                <span><b>{{notif.id_user_name}}</b>
                                  <ng-container
                                    *ngFor="let item of dictionnary_of_similar_notifications[i].slice(0,3);let j=index">
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>j+1">,
                                      <b>{{item.id_user_name}}</b> </ng-container>
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==j+1">,
                                      <b>{{item.id_user_name}}</b> &nbsp; et
                                      {{dictionnary_of_similar_notifications[i].length-3}} autres utilisateurs ont aimé
                                      votre commentaire : {{notif.information}}</ng-container>
                                  </ng-container>
                                </span>
                              </ng-container>
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==0">
                                <span><b>{{notif.id_user_name}}</b> a aimé votre commentaire :
                                  {{notif.information}}</span>
                              </ng-container>
                              <span class="notification-date">{{list_of_notifications_dates[i]}}</span>
                            </div>
                          </a>
                        </ng-container>

                        <ng-container *ngIf="notif.publication_category=='writing'">
                          <a (click)="open_writing(notif);" [routerLink]="get_writing(notif)">
                            <div class="left-container">
                              <img [src]="list_of_notifications_profile_pictures[i]" (load)="load_notification_pp(i)"
                                [ngClass]="{'invisible':!notification_loaded[i]}">
                              <div class="notification-icon like">
                                <mat-icon>thumb_up</mat-icon>
                              </div>
                            </div>
                            <div class="right-container">
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==1">
                                <span><b>{{notif.id_user_name}}</b> et
                                  <b>{{dictionnary_of_similar_notifications[i][0].id_user_name}}</b> ont aimé votre
                                  commentaire : {{notif.information}}</span>
                              </ng-container>
                              <ng-container
                                *ngIf="dictionnary_of_similar_notifications[i].length>1 && 4>dictionnary_of_similar_notifications[i].length">
                                <span><b>{{notif.id_user_name}}</b>
                                  <ng-container
                                    *ngFor="let item of dictionnary_of_similar_notifications[i];let j=index">
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>j+1">,
                                      <b>{{item.id_user_name}}</b> </ng-container>
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==j+1">et
                                      <b>{{item.id_user_name}}</b> ont aimé votre commentaire : {{notif.information}}
                                    </ng-container>
                                  </ng-container>
                                </span>
                              </ng-container>
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>3 ">
                                <span><b>{{notif.id_user_name}}</b>
                                  <ng-container
                                    *ngFor="let item of dictionnary_of_similar_notifications[i].slice(0,3);let j=index">
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>j+1">,
                                      <b>{{item.id_user_name}}</b> </ng-container>
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==j+1">,
                                      <b>{{item.id_user_name}}</b> &nbsp; et
                                      {{dictionnary_of_similar_notifications[i].length-3}} autres utilisateurs ont aimé
                                      votre commentaire : {{notif.information}}</ng-container>
                                  </ng-container>
                                </span>
                              </ng-container>
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==0">
                                <span><b>{{notif.id_user_name}}</b> a aimé votre commentaire :
                                  {{notif.information}}</span>
                              </ng-container>
                              <span class="notification-date">{{list_of_notifications_dates[i]}}</span>
                            </div>
                          </a>
                        </ng-container>

                        <ng-container *ngIf="notif.publication_category=='ad'">
                          <a (click)="open_ad(notif);" [routerLink]="get_ad(notif)">
                            <div class="left-container">
                              <img [src]="list_of_notifications_profile_pictures[i]" (load)="load_notification_pp(i)"
                                [ngClass]="{'invisible':!notification_loaded[i]}">
                              <div class="notification-icon like">
                                <mat-icon>thumb_up</mat-icon>
                              </div>
                            </div>
                            <div class="right-container">
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==1">
                                <span><b>{{notif.id_user_name}}</b> et
                                  <b>{{dictionnary_of_similar_notifications[i][0].id_user_name}}</b> ont aimé votre
                                  commentaire : {{notif.information}}</span>
                              </ng-container>
                              <ng-container
                                *ngIf="dictionnary_of_similar_notifications[i].length>1 && 4>dictionnary_of_similar_notifications[i].length">
                                <span><b>{{notif.id_user_name}}</b>
                                  <ng-container
                                    *ngFor="let item of dictionnary_of_similar_notifications[i];let j=index">
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>j+1">,
                                      <b>{{item.id_user_name}}</b> </ng-container>
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==j+1">et
                                      <b>{{item.id_user_name}}</b> ont aimé votre commentaire : {{notif.information}}
                                    </ng-container>
                                  </ng-container>
                                </span>
                              </ng-container>
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>3 ">
                                <span><b>{{notif.id_user_name}}</b>
                                  <ng-container
                                    *ngFor="let item of dictionnary_of_similar_notifications[i].slice(0,3);let j=index">
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length>j+1">,
                                      <b>{{item.id_user_name}}</b> </ng-container>
                                    <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==j+1">,
                                      <b>{{item.id_user_name}}</b> &nbsp; et
                                      {{dictionnary_of_similar_notifications[i].length-3}} autres utilisateurs ont aimé
                                      votre commentaire : {{notif.information}}</ng-container>
                                  </ng-container>
                                </span>
                              </ng-container>
                              <ng-container *ngIf="dictionnary_of_similar_notifications[i].length==0">
                                <span><b>{{notif.id_user_name}}</b> a aimé votre commentaire :
                                  {{notif.information}}</span>
                              </ng-container>
                              <span class="notification-date">{{list_of_notifications_dates[i]}}</span>
                            </div>
                          </a>
                        </ng-container>
                      </ng-container>
                    </div>
                  </div>

                </div>
              </div>
            </div>

            <!-- ---------------------------NOTIFICATIONS END----------------------------------->
            <!-- ---------------------------NOTIFICATIONS END----------------------------------->
            <!-- ---------------------------NOTIFICATIONS END----------------------------------->
            <!-- ---------------------------NOTIFICATIONS END----------------------------------->

            <a class="profile-container" [routerLink]="get_my_profile()">
              <div class="profile-picture" [ngClass]="{ 'shiny': !pp_is_loaded || !data_retrieved}">
                <img [src]="profile_picture" (load)="pp_loaded()"
                  [ngClass]="{'invisible': !pp_is_loaded || !data_retrieved}">
              </div>
              <span [ngClass]="{'invisible': !data_retrieved}">Mon profil</span>
            </a>


          </div>

          <!--connexion part-->
          <div class="navbar-l1-icons-container">


            <button class="signup" *ngIf="type_of_profile=='visitor' && !activated_search" (click)="signup()">
              <div class="icon-container2">
                <div class="icon2 icon-edit">
                </div>
              </div>
              <span>S'inscrire</span>
            </button>



            <div class="connexion-container"
              [ngClass]="{'account_opened': type_of_profile=='account' || type_of_profile=='suspended' }"
              *ngIf="!activated_search">

              <div class="connexion" [ngClass]="{'disconnecting': disconnecting}"
                *ngIf="type_of_profile=='account' || type_of_profile=='suspended'" (click)="logout()">
                <mat-icon *ngIf="!disconnecting" class="rotate-icon">login</mat-icon>
                <span *ngIf="!disconnecting">Se déconnecter</span>
                <mat-spinner *ngIf="disconnecting" diameter="20"></mat-spinner>
              </div>
              <div class="connexion" *ngIf="type_of_profile=='visitor'" (click)="login()">
                <mat-icon>login</mat-icon>
                <span>Se connecter</span>
              </div>


            </div>

            <div class="options LARGE-SCREEN-OPTIONS" *ngIf="!activated_search">
              <button mat-icon-button class="optionsMenu" tabIndex="-1" [matMenuTriggerFor]="options">
                <mat-icon class="optionsButton more">more_vert</mat-icon>
              </button>
              <mat-menu #options="matMenu" class="navbar-mat-menu">
                <button class="navbar-button-menu-item" tabIndex="-1" mat-menu-item *ngIf="(type_of_profile=='account' || type_of_profile=='suspended')" (click)="really_open_my_account()">
                  <mat-icon class="item-icon">settings</mat-icon>
                  <span>Mon compte</span>
                </button>
                <button class="navbar-button-menu-item" tabIndex="-1" mat-menu-item>
                  <mat-icon class="item-icon">help</mat-icon>
                  <span>Qui sommes-nous</span>
                </button>
                <button class="navbar-button-menu-item" tabIndex="-1" mat-menu-item>
                  <mat-icon class="item-icon">lock</mat-icon>
                  <span>Crédits</span>
                </button>
              </mat-menu>
            </div>

            <div class="options SMALL-SCREEN-OPTIONS"
              *ngIf="type_of_profile!='account' && type_of_profile!='suspended' && !activated_search">
              <button mat-icon-button class="optionsMenu" tabIndex="-1" [matMenuTriggerFor]="options2">
                <mat-icon class="optionsButton more">more_vert</mat-icon>
              </button>
              <mat-menu #options2="matMenu" class="navbar-mat-menu">
                <button class="navbar-button-menu-item" tabIndex="-1" mat-menu-item (click)="login()">
                  <mat-icon class="item-icon">exit_to_app</mat-icon>
                  <span>Se connecter</span>
                </button>
                <button class="navbar-button-menu-item" tabIndex="-1" mat-menu-item (click)="signup()">
                  <mat-icon class="item-icon">edit</mat-icon>
                  <span>S'inscrire</span>
                </button>
                <button class="navbar-button-menu-item" tabIndex="-1" mat-menu-item>
                  <mat-icon class="item-icon">help</mat-icon>
                  <span>Qui sommes-nous</span>
                </button>
                <button class="navbar-button-menu-item" tabIndex="-1" mat-menu-item>
                  <mat-icon class="item-icon">lock</mat-icon>
                  <span>Crédits</span>
                </button>
              </mat-menu>
            </div>

            <div class="options SMALL-SCREEN-OPTIONS"
              *ngIf="(type_of_profile=='account' || type_of_profile=='suspended') && !activated_search">
              <button mat-icon-button class="optionsMenu" tabIndex="-1" [matMenuTriggerFor]="options2">
                <mat-icon class="optionsButton more">more_vert</mat-icon>
              </button>
              <mat-menu #options2="matMenu" class="navbar-mat-menu">
                <button class="navbar-button-menu-item" tabIndex="-1" mat-menu-item (click)="really_open_my_account()">
                  <mat-icon class="item-icon">settings</mat-icon>
                  <span>Mon compte</span>
                </button>
                <button class="navbar-button-menu-item" tabIndex="-1" mat-menu-item>
                  <mat-icon class="item-icon">help</mat-icon>
                  <span>Qui sommes-nous</span>
                </button>
                <button class="navbar-button-menu-item" tabIndex="-1" mat-menu-item>
                  <mat-icon class="item-icon">lock</mat-icon>
                  <span>Crédits</span>
                </button>
                <button class="navbar-button-menu-item" tabIndex="-1" mat-menu-item (click)="logout()">
                  <mat-icon class="item-icon">login</mat-icon>
                  <span>Se déconnecter</span>
                </button>
              </mat-menu>
            </div>

            <div class="options absolute-close" *ngIf="activated_search">
              <button mat-icon-button class="optionsMenu" tabIndex="-1" (click)="cancel_search();">
                <mat-icon class="optionsButton more">close</mat-icon>
              </button>
            </div>

          </div>
        </ng-container>




      </nav>
    </div>






  </div>

  <div #navbarMargin class="navbar-margin"></div>

</div>

<!--Icons made by <a href="https://www.flaticon.com/authors/freepik" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a>-->